{"id":"M7DK","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607046859852},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607046859848},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607047108423},{"name":"../../../base/common/event.js","loc":{"line":27,"column":24},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/event.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":28,"column":44},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../base/common/platform.js","loc":{"line":29,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/platform.js"},{"name":"../../../base/common/errors.js","loc":{"line":30,"column":24},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../config/editorOptions.js","loc":{"line":31,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js"},{"name":"../model/textModel.js","loc":{"line":32,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js"},{"name":"../modes.js","loc":{"line":33,"column":47},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"../modes/modesRegistry.js","loc":{"line":34,"column":46},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/modesRegistry.js"},{"name":"./resourceConfiguration.js","loc":{"line":35,"column":47},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/resourceConfiguration.js"},{"name":"../../../platform/configuration/common/configuration.js","loc":{"line":36,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js"},{"name":"../../../base/common/async.js","loc":{"line":37,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/cancellation.js","loc":{"line":38,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/cancellation.js"},{"name":"../model/tokensStore.js","loc":{"line":39,"column":54},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/tokensStore.js"},{"name":"../../../platform/theme/common/themeService.js","loc":{"line":40,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ModelServiceImpl=void 0;var e=require(\"../../../base/common/event.js\"),t=require(\"../../../base/common/lifecycle.js\"),n=g(require(\"../../../base/common/platform.js\")),i=g(require(\"../../../base/common/errors.js\")),o=require(\"../config/editorOptions.js\"),r=require(\"../model/textModel.js\"),s=require(\"../modes.js\"),a=require(\"../modes/modesRegistry.js\"),u=require(\"./resourceConfiguration.js\"),l=require(\"../../../platform/configuration/common/configuration.js\"),c=require(\"../../../base/common/async.js\"),d=require(\"../../../base/common/cancellation.js\"),h=require(\"../model/tokensStore.js\"),_=require(\"../../../platform/theme/common/themeService.js\");function p(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},S=function(e,t){return function(n,i){t(n,i,e)}};function v(e){return e.toString()}var y=function(){function e(e,n,i){this._modelEventListeners=new t.DisposableStore,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(function(){return n(e)})),this._modelEventListeners.add(e.onDidChangeLanguage(function(t){return i(e,t)}))}return e.prototype._disposeLanguageSelection=function(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null),this._languageSelection&&(this._languageSelection.dispose(),this._languageSelection=null)},e.prototype.dispose=function(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()},e.prototype.setLanguage=function(e){var t=this;this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(function(){return t.model.setMode(e.languageIdentifier)}),this.model.setMode(e.languageIdentifier)},e}(),M=n.isLinux||n.isMacintosh?1:2,O=function(t){function n(n,i,o){var r=t.call(this)||this;return r._onModelAdded=r._register(new e.Emitter),r.onModelAdded=r._onModelAdded.event,r._onModelRemoved=r._register(new e.Emitter),r.onModelRemoved=r._onModelRemoved.event,r._onModelModeChanged=r._register(new e.Emitter),r.onModelModeChanged=r._onModelModeChanged.event,r._configurationService=n,r._resourcePropertiesService=i,r._models={},r._modelCreationOptionsByLanguageAndResource=Object.create(null),r._configurationServiceSubscription=r._configurationService.onDidChangeConfiguration(function(e){return r._updateModelOptions()}),r._updateModelOptions(),r._register(new T(r,o)),r}return f(n,t),n._readModelOptions=function(e,t){var n=o.EDITOR_MODEL_DEFAULTS.tabSize;if(e.editor&&void 0!==e.editor.tabSize){var i=parseInt(e.editor.tabSize,10);isNaN(i)||(n=i),n<1&&(n=1)}var r=n;if(e.editor&&void 0!==e.editor.indentSize&&\"tabSize\"!==e.editor.indentSize){var s=parseInt(e.editor.indentSize,10);isNaN(s)||(r=s),r<1&&(r=1)}var a=o.EDITOR_MODEL_DEFAULTS.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(a=\"false\"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));var u=M,l=e.eol;\"\\r\\n\"===l?u=2:\"\\n\"===l&&(u=1);var c=o.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(c=\"false\"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));var d=o.EDITOR_MODEL_DEFAULTS.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(d=\"false\"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));var h=o.EDITOR_MODEL_DEFAULTS.largeFileOptimizations;return e.editor&&void 0!==e.editor.largeFileOptimizations&&(h=\"false\"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations)),{isForSimpleWidget:t,tabSize:n,indentSize:r,insertSpaces:a,detectIndentation:d,defaultEOL:u,trimAutoWhitespace:c,largeFileOptimizations:h}},n.prototype.getCreationOptions=function(e,t,i){var o=this._modelCreationOptionsByLanguageAndResource[e+t];if(!o){var r=this._configurationService.getValue(\"editor\",{overrideIdentifier:e,resource:t}),s=this._resourcePropertiesService.getEOL(t,e);o=n._readModelOptions({editor:r,eol:s},i),this._modelCreationOptionsByLanguageAndResource[e+t]=o}return o},n.prototype._updateModelOptions=function(){var e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);for(var t=Object.keys(this._models),i=0,o=t.length;i<o;i++){var r=t[i],s=this._models[r],a=s.model.getLanguageIdentifier().language,u=s.model.uri,l=e[a+u],c=this.getCreationOptions(a,u,s.model.isForSimpleWidget);n._setModelOptionsForModel(s.model,c,l)}},n._setModelOptionsForModel=function(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace}))},n.prototype.dispose=function(){this._configurationServiceSubscription.dispose(),t.prototype.dispose.call(this)},n.prototype._createModelData=function(e,t,n,i){var o=this,s=this.getCreationOptions(t.language,n,i),a=new r.TextModel(e,s,t,n),u=v(a.uri);if(this._models[u])throw new Error(\"ModelService: Cannot add model because it already exists!\");var l=new y(a,function(e){return o._onWillDispose(e)},function(e,t){return o._onDidChangeLanguage(e,t)});return this._models[u]=l,l},n.prototype.createModel=function(e,t,n,i){var o;return void 0===i&&(i=!1),t?(o=this._createModelData(e,t.languageIdentifier,n,i),this.setMode(o.model,t)):o=this._createModelData(e,a.PLAINTEXT_LANGUAGE_IDENTIFIER,n,i),this._onModelAdded.fire(o.model),o.model},n.prototype.setMode=function(e,t){if(t){var n=this._models[v(e.uri)];n&&n.setLanguage(t)}},n.prototype.getModels=function(){for(var e=[],t=Object.keys(this._models),n=0,i=t.length;n<i;n++){var o=t[n];e.push(this._models[o].model)}return e},n.prototype.getModel=function(e){var t=v(e),n=this._models[t];return n?n.model:null},n.prototype._onWillDispose=function(e){var t=v(e.uri),n=this._models[t];delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageIdentifier().language+e.uri],this._onModelRemoved.fire(e)},n.prototype._onDidChangeLanguage=function(e,t){var i=t.oldLanguage,o=e.getLanguageIdentifier().language,r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(o,e.uri,e.isForSimpleWidget);n._setModelOptionsForModel(e,s,r),this._onModelModeChanged.fire({model:e,oldModeId:i})},n=m([S(0,l.IConfigurationService),S(1,u.ITextResourcePropertiesService),S(2,_.IThemeService)],n)}(t.Disposable);exports.ModelServiceImpl=O;var T=function(e){function t(t,n){var i=e.call(this)||this;return i._watchers=Object.create(null),i._semanticStyling=i._register(new L(n)),i._register(t.onModelAdded(function(e){i._watchers[e.uri.toString()]=new b(e,n,i._semanticStyling)})),i._register(t.onModelRemoved(function(e){i._watchers[e.uri.toString()].dispose(),delete i._watchers[e.uri.toString()]})),i}return f(t,e),t}(t.Disposable),L=function(e){function t(t){var n=e.call(this)||this;return n._themeService=t,n._caches=new WeakMap,n._themeService&&n._register(n._themeService.onThemeChange(function(){n._caches=new WeakMap})),n}return f(t,e),t.prototype.get=function(e){return this._caches.has(e)||this._caches.set(e,new C(e.getLegend(),this._themeService)),this._caches.get(e)},t}(t.Disposable),k=function(){return function(e,t,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.metadata=n,this.next=null}}(),I=function(){function e(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength)}return e._nullOutEntries=function(e,t){for(var n=0;n<t;n++)e[n]=null},e.prototype._hashFunc=function(e,t){return((e<<5)-e+t|0)%this._currentLength},e.prototype.get=function(e,t){for(var n=this._hashFunc(e,t),i=this._elements[n];i;){if(i.tokenTypeIndex===e&&i.tokenModifierSet===t)return i;i=i.next}return null},e.prototype.add=function(t,n,i){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){var o=this._elements;this._currentLengthIndex++,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength);for(var r=0,s=o;r<s.length;r++)for(var a=s[r];a;){var u=a.next;a.next=null,this._add(a),a=u}}this._add(new k(t,n,i))},e.prototype._add=function(e){var t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet);e.next=this._elements[t],this._elements[t]=e},e._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143],e}(),C=function(){function e(e,t){this._legend=e,this._themeService=t,this._hashTable=new I}return e.prototype.getMetadata=function(e,t){var n=this._hashTable.get(e,t);if(n)return n.metadata;for(var i=this._legend.tokenTypes[e],o=[],r=0;0!==t&&r<this._legend.tokenModifiers.length;r++)1&t&&o.push(this._legend.tokenModifiers[r]),t>>=1;var s=this._themeService.getTheme().getTokenStyleMetadata(i,o);return void 0===s&&(s=2147483647),this._hashTable.add(e,t,s),s},e}(),E=function(){function e(e,t,n){this._provider=e,this.resultId=t,this.data=n}return e.prototype.dispose=function(){this._provider.releaseSemanticTokens(this.resultId)},e}(),b=function(e){function t(t,n,i){var o=e.call(this)||this;return o._isDisposed=!1,o._model=t,o._semanticStyling=i,o._fetchSemanticTokens=o._register(new c.RunOnceScheduler(function(){return o._fetchSemanticTokensNow()},300)),o._currentResponse=null,o._currentRequestCancellationTokenSource=null,o._register(o._model.onDidChangeContent(function(e){o._fetchSemanticTokens.isScheduled()||o._fetchSemanticTokens.schedule()})),o._register(s.SemanticTokensProviderRegistry.onDidChange(function(e){return o._fetchSemanticTokens.schedule()})),n&&o._register(n.onThemeChange(function(e){o._setSemanticTokens(null,null,null,[]),o._fetchSemanticTokens.schedule()})),o._fetchSemanticTokens.schedule(0),o}return f(t,e),t.prototype.dispose=function(){this._isDisposed=!0,this._currentResponse&&(this._currentResponse.dispose(),this._currentResponse=null),this._currentRequestCancellationTokenSource&&(this._currentRequestCancellationTokenSource.cancel(),this._currentRequestCancellationTokenSource=null),e.prototype.dispose.call(this)},t.prototype._fetchSemanticTokensNow=function(){var e=this;if(!this._currentRequestCancellationTokenSource){var t=this._getSemanticColoringProvider();if(t){this._currentRequestCancellationTokenSource=new d.CancellationTokenSource;var n=[],o=this._model.onDidChangeContent(function(e){n.push(e)}),r=this._semanticStyling.get(t),s=this._currentResponse&&this._currentResponse.resultId||null;Promise.resolve(t.provideSemanticTokens(this._model,s,null,this._currentRequestCancellationTokenSource.token)).then(function(i){e._currentRequestCancellationTokenSource=null,o.dispose(),e._setSemanticTokens(t,i||null,r,n)},function(s){i.onUnexpectedError(s),e._currentRequestCancellationTokenSource=null,o.dispose(),e._setSemanticTokens(t,null,r,n)})}}},t._isSemanticTokens=function(e){return e&&!!e.data},t._isSemanticTokensEdits=function(e){return e&&Array.isArray(e.edits)},t._copy=function(e,t,n,i,o){for(var r=0;r<o;r++)n[i+r]=e[t+r]},t.prototype._setSemanticTokens=function(e,n,i,o){var r=this._currentResponse;if(this._currentResponse&&(this._currentResponse.dispose(),this._currentResponse=null),this._isDisposed)e&&n&&e.releaseSemanticTokens(n.resultId);else if(e&&n&&i){if(t._isSemanticTokensEdits(n)){if(!r)return void this._model.setSemanticTokens(null);if(0===n.edits.length)n={resultId:n.resultId,data:r.data};else{for(var s=0,a=0,u=n.edits;a<u.length;a++){s+=((g=u[a]).data?g.data.length:0)-g.deleteCount}for(var l=r.data,c=new Uint32Array(l.length+s),d=l.length,_=c.length,p=n.edits.length-1;p>=0;p--){var g,f=d-((g=n.edits[p]).start+g.deleteCount);f>0&&(t._copy(l,d-f,c,_-f,f),_-=f),g.data&&(t._copy(g.data,0,c,_-g.data.length,g.data.length),_-=g.data.length),d=g.start}d>0&&t._copy(l,0,c,0,d),n={resultId:n.resultId,data:c}}}if(t._isSemanticTokens(n)){this._currentResponse=new E(e,n.resultId,n.data);l=n.data;for(var m=n.data.length/5|0,S=Math.max(Math.ceil(m/1024),400),v=[],y=0,M=1,O=0;y<m;){var T=y,L=Math.min(T+S,m);if(L<m){for(var k=L;k-1>T&&0===l[5*k];)k--;if(k-1===T){for(var I=L;I+1<m&&0===l[5*I];)I++;L=I}else L=k}c=new Uint32Array(4*(L-T));for(var C=0,b=0;y<L;){var R=5*y,D=l[R],w=l[R+1],A=M+D,j=0===D?O+w:w,x=l[R+2],q=l[R+3],z=l[R+4],W=i.getMetadata(q,z);2147483647!==W&&(0===b&&(b=A),c[C]=A-b,c[C+1]=j,c[C+2]=j+x,c[C+3]=W,C+=4),M=A,O=j,y++}C!==c.length&&(c=c.subarray(0,C));var F=new h.MultilineTokens2(b,new h.SparseEncodedTokens(c));v.push(F)}if(o.length>0){for(var P=0,B=o;P<B.length;P++)for(var N=B[P],U=0,Z=v;U<Z.length;U++)for(var G=Z[U],V=0,X=N.changes;V<X.length;V++){var H=X[V];G.applyEdit(H.range,H.text)}this._fetchSemanticTokens.isScheduled()||this._fetchSemanticTokens.schedule()}this._model.setSemanticTokens(v)}else this._model.setSemanticTokens(null)}else this._model.setSemanticTokens(null)},t.prototype._getSemanticColoringProvider=function(){var e=s.SemanticTokensProviderRegistry.ordered(this._model);return e.length>0?e[0]:null},t}(t.Disposable);"},"sourceMaps":null,"error":null,"hash":"4e90523d82b0164e0a1ce3c26631e299","cacheData":{"env":{}}}
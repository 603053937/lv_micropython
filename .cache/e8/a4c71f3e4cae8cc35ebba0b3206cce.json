{"id":"Zz8y","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607046859852},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607046859848},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607047108423},{"name":"../../../base/common/async.js","loc":{"line":63,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":64,"column":67},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../base/common/worker/simpleWorker.js","loc":{"line":65,"column":60},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js"},{"name":"../../../base/worker/defaultWorkerFactory.js","loc":{"line":66,"column":37},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/worker/defaultWorkerFactory.js"},{"name":"../core/range.js","loc":{"line":67,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../modes.js","loc":{"line":68,"column":23},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"../modes/languageConfigurationRegistry.js","loc":{"line":69,"column":46},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/languageConfigurationRegistry.js"},{"name":"./editorSimpleWorker.js","loc":{"line":70,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"},{"name":"./modelService.js","loc":{"line":71,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"},{"name":"./resourceConfiguration.js","loc":{"line":72,"column":50},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/resourceConfiguration.js"},{"name":"../../../base/common/strings.js","loc":{"line":73,"column":28},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"},{"name":"../../../base/common/arrays.js","loc":{"line":74,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/arrays.js"},{"name":"../../../platform/log/common/log.js","loc":{"line":75,"column":28},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/log/common/log.js"},{"name":"../../../base/common/stopwatch.js","loc":{"line":76,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/stopwatch.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.EditorWorkerClient=exports.EditorWorkerHost=exports.EditorWorkerServiceImpl=void 0;var e=require(\"../../../base/common/async.js\"),t=require(\"../../../base/common/lifecycle.js\"),r=require(\"../../../base/common/worker/simpleWorker.js\"),o=require(\"../../../base/worker/defaultWorkerFactory.js\"),n=require(\"../core/range.js\"),i=g(require(\"../modes.js\")),s=require(\"../modes/languageConfigurationRegistry.js\"),c=require(\"./editorSimpleWorker.js\"),u=require(\"./modelService.js\"),a=require(\"./resourceConfiguration.js\"),l=require(\"../../../base/common/strings.js\"),d=require(\"../../../base/common/arrays.js\"),p=require(\"../../../platform/log/common/log.js\"),f=require(\"../../../base/common/stopwatch.js\");function h(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var _=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),y=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},m=function(e,t){return function(r,o){t(r,o,e)}},v=function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function s(e){try{u(o.next(e))}catch(t){i(t)}}function c(e){try{u(o.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,c)}u((o=o.apply(e,t||[])).next())})},k=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(c){i=[6,c],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},S=6e4,w=3e5;function M(e,t){var r=e.getModel(t);return!!r&&!r.isTooLargeForSyncing()}var W=function(e){function t(t,r,o){var n=e.call(this)||this;return n._modelService=t,n._workerManager=n._register(new C(n._modelService)),n._logService=o,n._register(i.LinkProviderRegistry.register(\"*\",{provideLinks:function(e,t){return M(n._modelService,e.uri)?n._workerManager.withWorker().then(function(t){return t.computeLinks(e.uri)}).then(function(e){return e&&{links:e}}):Promise.resolve({links:[]})}})),n._register(i.CompletionProviderRegistry.register(\"*\",new b(n._workerManager,r,n._modelService))),n}return _(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.canComputeDiff=function(e,t){return M(this._modelService,e)&&M(this._modelService,t)},t.prototype.computeDiff=function(e,t,r,o){return this._workerManager.withWorker().then(function(n){return n.computeDiff(e,t,r,o)})},t.prototype.computeMoreMinimalEdits=function(e,t){var r=this;if((0,d.isNonEmptyArray)(t)){if(!M(this._modelService,e))return Promise.resolve(t);var o=f.StopWatch.create(!0),n=this._workerManager.withWorker().then(function(r){return r.computeMoreMinimalEdits(e,t)});return n.finally(function(){return r._logService.trace(\"FORMAT#computeMoreMinimalEdits\",e.toString(!0),o.elapsed())}),n}return Promise.resolve(void 0)},t.prototype.canNavigateValueSet=function(e){return M(this._modelService,e)},t.prototype.navigateValueSet=function(e,t,r){return this._workerManager.withWorker().then(function(o){return o.navigateValueSet(e,t,r)})},t.prototype.canComputeWordRanges=function(e){return M(this._modelService,e)},t.prototype.computeWordRanges=function(e,t){return this._workerManager.withWorker().then(function(r){return r.computeWordRanges(e,t)})},t=y([m(0,u.IModelService),m(1,a.ITextResourceConfigurationService),m(2,p.ILogService)],t)}(t.Disposable);exports.EditorWorkerServiceImpl=W;var b=function(){function e(e,t,r){this._debugDisplayName=\"wordbasedCompletions\",this._workerManager=e,this._configurationService=t,this._modelService=r}return e.prototype.provideCompletionItems=function(e,t){return v(this,void 0,void 0,function(){var r,o,i,s;return k(this,function(c){switch(c.label){case 0:return this._configurationService.getValue(e.uri,t,\"editor\").wordBasedSuggestions&&M(this._modelService,e.uri)?(r=e.getWordAtPosition(t),o=r?new n.Range(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):n.Range.fromPositions(t),i=o.setEndPosition(t.lineNumber,t.column),[4,this._workerManager.withWorker()]):[2,void 0];case 1:return[4,c.sent().textualSuggest(e.uri,t)];case 2:return(s=c.sent())?[2,{suggestions:s.map(function(e){return{kind:18,label:e,insertText:e,range:{insert:i,replace:o}}})}]:[2,void 0]}})})},e}(),C=function(t){function r(r){var o=t.call(this)||this;return o._modelService=r,o._editorWorkerClient=null,o._lastWorkerUsedTime=(new Date).getTime(),o._register(new e.IntervalTimer).cancelAndSet(function(){return o._checkStopIdleWorker()},Math.round(w/2)),o._register(o._modelService.onModelRemoved(function(e){return o._checkStopEmptyWorker()})),o}return _(r,t),r.prototype.dispose=function(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),t.prototype.dispose.call(this)},r.prototype._checkStopEmptyWorker=function(){this._editorWorkerClient&&(0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null))},r.prototype._checkStopIdleWorker=function(){this._editorWorkerClient&&((new Date).getTime()-this._lastWorkerUsedTime>w&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null))},r.prototype.withWorker=function(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new R(this._modelService,!1,\"editorWorkerService\")),Promise.resolve(this._editorWorkerClient)},r}(t.Disposable),j=function(r){function o(t,o,n){var i=r.call(this)||this;if(i._syncedModels=Object.create(null),i._syncedModelsLastUsedTime=Object.create(null),i._proxy=t,i._modelService=o,!n){var s=new e.IntervalTimer;s.cancelAndSet(function(){return i._checkStopModelSync()},Math.round(S/2)),i._register(s)}return i}return _(o,r),o.prototype.dispose=function(){for(var e in this._syncedModels)(0,t.dispose)(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),r.prototype.dispose.call(this)},o.prototype.ensureSyncedResources=function(e){for(var t=0,r=e;t<r.length;t++){var o=r[t],n=o.toString();this._syncedModels[n]||this._beginModelSync(o),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=(new Date).getTime())}},o.prototype._checkStopModelSync=function(){var e=(new Date).getTime(),t=[];for(var r in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[r]>S&&t.push(r)}for(var o=0,n=t;o<n.length;o++){var i=n[o];this._stopModelSync(i)}},o.prototype._beginModelSync=function(e){var r=this,o=this._modelService.getModel(e);if(o&&!o.isTooLargeForSyncing()){var n=e.toString();this._proxy.acceptNewModel({url:o.uri.toString(),lines:o.getLinesContent(),EOL:o.getEOL(),versionId:o.getVersionId()});var i=new t.DisposableStore;i.add(o.onDidChangeContent(function(e){r._proxy.acceptModelChanged(n.toString(),e)})),i.add(o.onWillDispose(function(){r._stopModelSync(n)})),i.add((0,t.toDisposable)(function(){r._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=i}},o.prototype._stopModelSync=function(e){var r=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],(0,t.dispose)(r)},o}(t.Disposable),O=function(){function e(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}return e.prototype.dispose=function(){this._instance.dispose()},e.prototype.getProxyObject=function(){return this._proxyObj},e}(),x=function(){function e(e){this._workerClient=e}return e.prototype.fhr=function(e,t){return this._workerClient.fhr(e,t)},e}();exports.EditorWorkerHost=x;var R=function(e){function t(t,r,n){var i=e.call(this)||this;return i._modelService=t,i._keepIdleModels=r,i._workerFactory=new o.DefaultWorkerFactory(n),i._worker=null,i._modelManager=null,i}return _(t,e),t.prototype.fhr=function(e,t){throw new Error(\"Not implemented!\")},t.prototype._getOrCreateWorker=function(){if(!this._worker)try{this._worker=this._register(new r.SimpleWorkerClient(this._workerFactory,\"vs/editor/common/services/editorSimpleWorker\",new x(this)))}catch(e){(0,r.logOnceWebWorkerWarning)(e),this._worker=new O(new c.EditorSimpleWorker(new x(this),null))}return this._worker},t.prototype._getProxy=function(){var e=this;return this._getOrCreateWorker().getProxyObject().then(void 0,function(t){return(0,r.logOnceWebWorkerWarning)(t),e._worker=new O(new c.EditorSimpleWorker(new x(e),null)),e._getOrCreateWorker().getProxyObject()})},t.prototype._getOrCreateModelManager=function(e){return this._modelManager||(this._modelManager=this._register(new j(e,this._modelService,this._keepIdleModels))),this._modelManager},t.prototype._withSyncedResources=function(e){var t=this;return this._getProxy().then(function(r){return t._getOrCreateModelManager(r).ensureSyncedResources(e),r})},t.prototype.computeDiff=function(e,t,r,o){return this._withSyncedResources([e,t]).then(function(n){return n.computeDiff(e.toString(),t.toString(),r,o)})},t.prototype.computeMoreMinimalEdits=function(e,t){return this._withSyncedResources([e]).then(function(r){return r.computeMoreMinimalEdits(e.toString(),t)})},t.prototype.computeLinks=function(e){return this._withSyncedResources([e]).then(function(t){return t.computeLinks(e.toString())})},t.prototype.textualSuggest=function(e,t){var r=this;return this._withSyncedResources([e]).then(function(o){var n=r._modelService.getModel(e);if(!n)return null;var i=s.LanguageConfigurationRegistry.getWordDefinition(n.getLanguageIdentifier().id),c=i.source,u=(0,l.regExpFlags)(i);return o.textualSuggest(e.toString(),t,c,u)})},t.prototype.computeWordRanges=function(e,t){var r=this;return this._withSyncedResources([e]).then(function(o){var n=r._modelService.getModel(e);if(!n)return Promise.resolve(null);var i=s.LanguageConfigurationRegistry.getWordDefinition(n.getLanguageIdentifier().id),c=i.source,u=(0,l.regExpFlags)(i);return o.computeWordRanges(e.toString(),t,c,u)})},t.prototype.navigateValueSet=function(e,t,r){var o=this;return this._withSyncedResources([e]).then(function(n){var i=o._modelService.getModel(e);if(!i)return null;var c=s.LanguageConfigurationRegistry.getWordDefinition(i.getLanguageIdentifier().id),u=c.source,a=(0,l.regExpFlags)(c);return n.navigateValueSet(e.toString(),t,r,u,a)})},t}(t.Disposable);exports.EditorWorkerClient=R;"},"sourceMaps":null,"error":null,"hash":"692028348d34161c35d2d9d412e4a130","cacheData":{"env":{}}}
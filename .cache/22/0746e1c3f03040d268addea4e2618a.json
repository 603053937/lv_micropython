{"id":"RSw5","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607046859852},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607046859848},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607047108423},{"name":"../../../base/common/async.js","loc":{"line":21,"column":77},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/errors.js","loc":{"line":22,"column":61},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":23,"column":55},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../browser/core/editorState.js","loc":{"line":24,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/core/editorState.js"},{"name":"../../browser/editorExtensions.js","loc":{"line":25,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"},{"name":"../../common/modes.js","loc":{"line":26,"column":41},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"./codelens.js","loc":{"line":27,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelens.js"},{"name":"./codelensWidget.js","loc":{"line":28,"column":47},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensWidget.js"},{"name":"../../../platform/commands/common/commands.js","loc":{"line":29,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/commands/common/commands.js"},{"name":"../../../platform/notification/common/notification.js","loc":{"line":30,"column":37},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/notification/common/notification.js"},{"name":"./codeLensCache.js","loc":{"line":31,"column":31},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codeLensCache.js"},{"name":"../../../base/browser/dom.js","loc":{"line":32,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/browser/dom.js"},{"name":"../../../base/common/hash.js","loc":{"line":33,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/hash.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.CodeLensContribution=void 0;var e=require(\"../../../base/common/async.js\"),o=require(\"../../../base/common/errors.js\"),s=require(\"../../../base/common/lifecycle.js\"),n=require(\"../../browser/core/editorState.js\"),t=require(\"../../browser/editorExtensions.js\"),i=require(\"../../common/modes.js\"),r=require(\"./codelens.js\"),d=require(\"./codelensWidget.js\"),l=require(\"../../../platform/commands/common/commands.js\"),a=require(\"../../../platform/notification/common/notification.js\"),c=require(\"./codeLensCache.js\"),h=require(\"../../../base/browser/dom.js\"),u=require(\"../../../base/common/hash.js\"),_=function(e,o,s,n){var t,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,s):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,o,s,n);else for(var d=e.length-1;d>=0;d--)(t=e[d])&&(r=(i<3?t(r):i>3?t(o,s,r):t(o,s))||r);return i>3&&r&&Object.defineProperty(o,s,r),r},m=function(e,o){return function(s,n){o(s,n,e)}},p=function(){for(var e=0,o=0,s=arguments.length;o<s;o++)e+=arguments[o].length;var n=Array(e),t=0;for(o=0;o<s;o++)for(var i=arguments[o],r=0,d=i.length;r<d;r++,t++)n[t]=i[r];return n},C=function(){function t(e,o,n,t){var r=this;this._editor=e,this._commandService=o,this._notificationService=n,this._codeLensCache=t,this._globalToDispose=new s.DisposableStore,this._localToDispose=new s.DisposableStore,this._lenses=[],this._oldCodeLensModels=new s.DisposableStore,this._modelChangeCounter=0,this._isEnabled=this._editor.getOption(11),this._globalToDispose.add(this._editor.onDidChangeModel(function(){return r._onModelChange()})),this._globalToDispose.add(this._editor.onDidChangeModelLanguage(function(){return r._onModelChange()})),this._globalToDispose.add(this._editor.onDidChangeConfiguration(function(){var e=r._isEnabled;r._isEnabled=r._editor.getOption(11),e!==r._isEnabled&&r._onModelChange()})),this._globalToDispose.add(i.CodeLensProviderRegistry.onDidChange(this._onModelChange,this)),this._globalToDispose.add(this._editor.onDidChangeConfiguration(function(e){e.hasChanged(32)&&r._updateLensStyle()})),this._onModelChange(),this._styleClassName=(0,u.hash)(this._editor.getId()).toString(16),this._styleElement=(0,h.createStyleSheet)(),this._updateLensStyle()}return t.prototype.dispose=function(){this._localDispose(),this._globalToDispose.dispose(),this._oldCodeLensModels.dispose(),(0,s.dispose)(this._currentCodeLensModel)},t.prototype._updateLensStyle=function(){var e=this._editor.getOptions(),o=e.get(32),s=e.get(47),n=\".monaco-editor .codelens-decoration.\"+this._styleClassName+\" { height: \"+Math.round(1.1*s)+\"px; line-height: \"+s+\"px; font-size: \"+Math.round(.9*o.fontSize)+\"px; padding-right: \"+Math.round(.45*o.fontSize)+\"px;}\";this._styleElement.innerHTML=n},t.prototype._localDispose=function(){this._currentFindCodeLensSymbolsPromise&&(this._currentFindCodeLensSymbolsPromise.cancel(),this._currentFindCodeLensSymbolsPromise=void 0,this._modelChangeCounter++),this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=void 0),this._localToDispose.clear(),this._oldCodeLensModels.clear(),(0,s.dispose)(this._currentCodeLensModel)},t.prototype._onModelChange=function(){var t=this;this._localDispose();var l=this._editor.getModel();if(l&&this._isEnabled){var a=this._codeLensCache.get(l);if(a&&this._renderCodeLensSymbols(a),i.CodeLensProviderRegistry.has(l)){for(var c=0,h=i.CodeLensProviderRegistry.all(l);c<h.length;c++){var u=h[c];if(\"function\"==typeof u.onDidChange){var _=u.onDidChange(function(){return C.schedule()});this._localToDispose.add(_)}}var m=this._detectVisibleLenses=new e.RunOnceScheduler(function(){return t._onViewportChanged()},250),C=new e.RunOnceScheduler(function(){var s=++t._modelChangeCounter;t._currentFindCodeLensSymbolsPromise&&t._currentFindCodeLensSymbolsPromise.cancel(),t._currentFindCodeLensSymbolsPromise=(0,e.createCancelablePromise)(function(e){return(0,r.getCodeLensData)(l,e)}),t._currentFindCodeLensSymbolsPromise.then(function(e){s===t._modelChangeCounter&&(t._currentCodeLensModel&&t._oldCodeLensModels.add(t._currentCodeLensModel),t._currentCodeLensModel=e,t._codeLensCache.put(l,e),t._renderCodeLensSymbols(e),m.schedule())},o.onUnexpectedError)},250);this._localToDispose.add(C),this._localToDispose.add(m),this._localToDispose.add(this._editor.onDidChangeModelContent(function(){t._editor.changeDecorations(function(e){t._editor.changeViewZones(function(o){var s=[],n=-1;t._lenses.forEach(function(e){e.isValid()&&n!==e.getLineNumber()?(e.update(o),n=e.getLineNumber()):s.push(e)});var i=new d.CodeLensHelper;s.forEach(function(e){e.dispose(i,o),t._lenses.splice(t._lenses.indexOf(e),1)}),i.commit(e)})}),m.schedule(),C.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(function(e){e.scrollTopChanged&&t._lenses.length>0&&m.schedule()})),this._localToDispose.add(this._editor.onDidLayoutChange(function(){m.schedule()})),this._localToDispose.add((0,s.toDisposable)(function(){if(t._editor.getModel()){var e=n.StableEditorScrollState.capture(t._editor);t._editor.changeDecorations(function(e){t._editor.changeViewZones(function(o){t._disposeAllLenses(e,o)})}),e.restore(t._editor)}else t._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseUp(function(e){var o,s,n;if(9===e.target.type){var i=e.target.element;if(\"SPAN\"===(null===(s=i)||void 0===s?void 0:s.tagName)&&(i=i.parentElement),\"A\"===(null===(n=i)||void 0===n?void 0:n.tagName))for(var r=0,d=t._lenses;r<d.length;r++){var l=d[r].getCommand(i);if(l){(o=t._commandService).executeCommand.apply(o,p([l.id],l.arguments||[])).catch(function(e){return t._notificationService.error(e)});break}}}})),C.schedule()}else a&&this._localToDispose.add((0,e.disposableTimeout)(function(){var e=t._codeLensCache.get(l);a===e&&(t._codeLensCache.delete(l),t._onModelChange())},3e4))}},t.prototype._disposeAllLenses=function(e,o){for(var s=new d.CodeLensHelper,n=0,t=this._lenses;n<t.length;n++){t[n].dispose(s,o)}e&&s.commit(e),this._lenses=[]},t.prototype._renderCodeLensSymbols=function(e){var o=this;if(this._editor.hasModel()){for(var s,t=this._editor.getModel().getLineCount(),i=[],r=0,l=e.lenses;r<l.length;r++){var a=l[r],c=a.symbol.range.startLineNumber;c<1||c>t||(s&&s[s.length-1].symbol.range.startLineNumber===c?s.push(a):(s=[a],i.push(s)))}var h=n.StableEditorScrollState.capture(this._editor);this._editor.changeDecorations(function(e){o._editor.changeViewZones(function(s){for(var n=new d.CodeLensHelper,t=0,r=0;r<i.length&&t<o._lenses.length;){var l=i[r][0].symbol.range.startLineNumber,a=o._lenses[t].getLineNumber();a<l?(o._lenses[t].dispose(n,s),o._lenses.splice(t,1)):a===l?(o._lenses[t].updateCodeLensSymbols(i[r],n),r++,t++):(o._lenses.splice(t,0,new d.CodeLensWidget(i[r],o._editor,o._styleClassName,n,s,function(){return o._detectVisibleLenses&&o._detectVisibleLenses.schedule()})),t++,r++)}for(;t<o._lenses.length;)o._lenses[t].dispose(n,s),o._lenses.splice(t,1);for(;r<i.length;)o._lenses.push(new d.CodeLensWidget(i[r],o._editor,o._styleClassName,n,s,function(){return o._detectVisibleLenses&&o._detectVisibleLenses.schedule()})),r++;n.commit(e)})}),h.restore(this._editor)}},t.prototype._onViewportChanged=function(){var s=this;this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=void 0);var n=this._editor.getModel();if(n){var t=[],i=[];if(this._lenses.forEach(function(e){var o=e.computeIfNecessary(n);o&&(t.push(o),i.push(e))}),0!==t.length){var r=(0,e.createCancelablePromise)(function(e){var s=t.map(function(s,t){var r=new Array(s.length),d=s.map(function(s,t){return s.symbol.command||\"function\"!=typeof s.provider.resolveCodeLens?(r[t]=s.symbol,Promise.resolve(void 0)):Promise.resolve(s.provider.resolveCodeLens(n,s.symbol,e)).then(function(e){r[t]=e},o.onUnexpectedExternalError)});return Promise.all(d).then(function(){e.isCancellationRequested||i[t].isDisposed()||i[t].updateCommands(r)})});return Promise.all(s)});this._currentResolveCodeLensSymbolsPromise=r,this._currentResolveCodeLensSymbolsPromise.then(function(){s._currentCodeLensModel&&s._codeLensCache.put(n,s._currentCodeLensModel),s._oldCodeLensModels.clear(),r===s._currentResolveCodeLensSymbolsPromise&&(s._currentResolveCodeLensSymbolsPromise=void 0)},function(e){(0,o.onUnexpectedError)(e),r===s._currentResolveCodeLensSymbolsPromise&&(s._currentResolveCodeLensSymbolsPromise=void 0)})}}},t.ID=\"css.editor.codeLens\",t=_([m(1,l.ICommandService),m(2,a.INotificationService),m(3,c.ICodeLensCache)],t)}();exports.CodeLensContribution=C,(0,t.registerEditorContribution)(C.ID,C);"},"sourceMaps":null,"error":null,"hash":"f347d039261a5c4816cf0ef1a27930f4","cacheData":{"env":{}}}
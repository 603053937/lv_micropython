{"id":"rnVS","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607286873532},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607286873524},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607287523892},{"name":"../../../base/common/errors.js","loc":{"line":18,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../base/common/event.js","loc":{"line":19,"column":24},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/event.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":20,"column":27},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../base/common/strings.js","loc":{"line":21,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"},{"name":"../../../base/common/uri.js","loc":{"line":22,"column":20},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/uri.js"},{"name":"../config/editorOptions.js","loc":{"line":23,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js"},{"name":"../core/position.js","loc":{"line":24,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/position.js"},{"name":"../core/range.js","loc":{"line":25,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../core/selection.js","loc":{"line":26,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js"},{"name":"../model.js","loc":{"line":27,"column":23},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model.js"},{"name":"./editStack.js","loc":{"line":28,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/editStack.js"},{"name":"./indentationGuesser.js","loc":{"line":29,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/indentationGuesser.js"},{"name":"./intervalTree.js","loc":{"line":30,"column":86},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/intervalTree.js"},{"name":"./pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js","loc":{"line":31,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js"},{"name":"./textModelEvents.js","loc":{"line":32,"column":178},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModelEvents.js"},{"name":"./textModelSearch.js","loc":{"line":33,"column":46},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModelSearch.js"},{"name":"./textModelTokens.js","loc":{"line":34,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModelTokens.js"},{"name":"./wordHelper.js","loc":{"line":35,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/wordHelper.js"},{"name":"../modes/languageConfigurationRegistry.js","loc":{"line":36,"column":46},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/languageConfigurationRegistry.js"},{"name":"../modes/nullMode.js","loc":{"line":37,"column":41},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/nullMode.js"},{"name":"../modes/supports.js","loc":{"line":38,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/supports.js"},{"name":"../modes/supports/richEditBrackets.js","loc":{"line":39,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/supports/richEditBrackets.js"},{"name":"../../../base/common/types.js","loc":{"line":40,"column":36},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/types.js"},{"name":"./tokensStore.js","loc":{"line":41,"column":52},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/tokensStore.js"},{"name":"../../../base/common/color.js","loc":{"line":42,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/color.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createTextBufferFactory=T,exports.createTextBuffer=R,exports.DidChangeContentEmitter=exports.DidChangeDecorationsEmitter=exports.ModelDecorationOptions=exports.ModelDecorationMinimapOptions=exports.ModelDecorationOverviewRulerOptions=exports.TextModel=exports.LONG_LINE_BOUNDARY=void 0;var e=require(\"../../../base/common/errors.js\"),t=require(\"../../../base/common/event.js\"),n=require(\"../../../base/common/lifecycle.js\"),i=N(require(\"../../../base/common/strings.js\")),r=require(\"../../../base/common/uri.js\"),o=require(\"../config/editorOptions.js\"),s=require(\"../core/position.js\"),a=require(\"../core/range.js\"),u=require(\"../core/selection.js\"),f=N(require(\"../model.js\")),d=require(\"./editStack.js\"),h=require(\"./indentationGuesser.js\"),l=require(\"./intervalTree.js\"),g=require(\"./pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js\"),c=require(\"./textModelEvents.js\"),p=require(\"./textModelSearch.js\"),_=require(\"./textModelTokens.js\"),m=require(\"./wordHelper.js\"),v=require(\"../modes/languageConfigurationRegistry.js\"),C=require(\"../modes/nullMode.js\"),L=require(\"../modes/supports.js\"),D=require(\"../modes/supports/richEditBrackets.js\"),y=require(\"../../../base/common/types.js\"),b=require(\"./tokensStore.js\"),I=require(\"../../../base/common/color.js\");function E(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function N(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}var k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function O(){return new g.PieceTreeTextBufferBuilder}function T(e){var t=O();return t.acceptChunk(e),t.finish()}function R(e,t){return(\"string\"==typeof e?T(e):e).create(t)}var w=0,S=999,M=1e4;exports.LONG_LINE_BOUNDARY=M;var x=function(){throw new Error(\"Invalid change accessor\")},A=function(n){function g(e,o,s,u){void 0===u&&(u=null);var f=n.call(this)||this;f._onWillDispose=f._register(new t.Emitter),f.onWillDispose=f._onWillDispose.event,f._onDidChangeDecorations=f._register(new q),f.onDidChangeDecorations=f._onDidChangeDecorations.event,f._onDidChangeLanguage=f._register(new t.Emitter),f.onDidChangeLanguage=f._onDidChangeLanguage.event,f._onDidChangeLanguageConfiguration=f._register(new t.Emitter),f.onDidChangeLanguageConfiguration=f._onDidChangeLanguageConfiguration.event,f._onDidChangeTokens=f._register(new t.Emitter),f.onDidChangeTokens=f._onDidChangeTokens.event,f._onDidChangeOptions=f._register(new t.Emitter),f.onDidChangeOptions=f._onDidChangeOptions.event,f._onDidChangeAttached=f._register(new t.Emitter),f.onDidChangeAttached=f._onDidChangeAttached.event,f._eventEmitter=f._register(new H),w++,f.id=\"$model\"+w,f.isForSimpleWidget=o.isForSimpleWidget,f._associatedResource=null==u?r.URI.parse(\"inmemory://model/\"+w):u,f._attachedEditorCount=0,f._buffer=R(e,o.defaultEOL),f._options=g.resolveOptions(f._buffer,o);var h=f._buffer.getLineCount(),l=f._buffer.getValueLengthInRange(new a.Range(1,1,h,f._buffer.getLineLength(h)+1),0);return o.largeFileOptimizations?f._isTooLargeForTokenization=l>g.LARGE_FILE_SIZE_THRESHOLD||h>g.LARGE_FILE_LINE_COUNT_THRESHOLD:f._isTooLargeForTokenization=!1,f._isTooLargeForSyncing=l>g.MODEL_SYNC_LIMIT,f._versionId=1,f._alternativeVersionId=1,f._isDisposed=!1,f._isDisposing=!1,f._languageIdentifier=s||C.NULL_LANGUAGE_IDENTIFIER,f._languageRegistryListener=v.LanguageConfigurationRegistry.onDidChange(function(e){e.languageIdentifier.id===f._languageIdentifier.id&&f._onDidChangeLanguageConfiguration.fire({})}),f._instanceId=i.singleLetterHash(w),f._lastDecorationId=0,f._decorations=Object.create(null),f._decorationsTree=new B,f._commandManager=new d.EditStack(f),f._isUndoing=!1,f._isRedoing=!1,f._trimAutoWhitespaceLines=null,f._tokens=new b.TokensStore,f._tokens2=new b.TokensStore2,f._tokenization=new _.TextModelTokenization(f),f}return k(g,n),g.createFromString=function(e,t,n,i){return void 0===t&&(t=g.DEFAULT_CREATION_OPTIONS),void 0===n&&(n=null),void 0===i&&(i=null),new g(e,t,n,i)},g.resolveOptions=function(e,t){if(t.detectIndentation){var n=(0,h.guessIndentation)(e,t.tabSize,t.insertSpaces);return new f.TextModelResolvedOptions({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new f.TextModelResolvedOptions({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})},g.prototype.onDidChangeRawContentFast=function(e){return this._eventEmitter.fastEvent(function(t){return e(t.rawContentChangedEvent)})},g.prototype.onDidChangeRawContent=function(e){return this._eventEmitter.slowEvent(function(t){return e(t.rawContentChangedEvent)})},g.prototype.onDidChangeContentFast=function(e){return this._eventEmitter.fastEvent(function(t){return e(t.contentChangedEvent)})},g.prototype.onDidChangeContent=function(e){return this._eventEmitter.slowEvent(function(t){return e(t.contentChangedEvent)})},g.prototype.dispose=function(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,n.prototype.dispose.call(this),this._isDisposing=!1},g.prototype._assertNotDisposed=function(){if(this._isDisposed)throw new Error(\"Model is disposed!\")},g.prototype._emitContentChangedEvent=function(e,t){this._isDisposing||this._eventEmitter.fire(new c.InternalModelContentChangeEvent(e,t))},g.prototype.setValue=function(e){if(this._assertNotDisposed(),null!==e){var t=R(e,this._options.defaultEOL);this.setValueFromTextBuffer(t)}},g.prototype._createContentChanged2=function(e,t,n,i,r,o,s){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:s}},g.prototype.setValueFromTextBuffer=function(e){if(this._assertNotDisposed(),null!==e){var t=this.getFullModelRange(),n=this.getValueLengthInRange(t),i=this.getLineCount(),r=this.getLineMaxColumn(i);this._buffer=e,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new B,this._commandManager=new d.EditStack(this),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new c.ModelRawContentChangedEvent([new c.ModelRawFlush],this._versionId,!1,!1),this._createContentChanged2(new a.Range(1,1,i,r),0,n,this.getValue(),!1,!1,!0))}},g.prototype.setEOL=function(e){this._assertNotDisposed();var t=1===e?\"\\r\\n\":\"\\n\";if(this._buffer.getEOL()!==t){var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new c.ModelRawContentChangedEvent([new c.ModelRawEOLChanged],this._versionId,!1,!1),this._createContentChanged2(new a.Range(1,1,r,o),0,i,this.getValue(),!1,!1,!1))}},g.prototype._onBeforeEOLChange=function(){var e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)},g.prototype._onAfterEOLChange=function(){for(var e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder(),n=0,i=t.length;n<i;n++){var r=t[n],o=r.cachedAbsoluteStart-r.start,s=this._buffer.getOffsetAt(r.range.startLineNumber,r.range.startColumn),a=this._buffer.getOffsetAt(r.range.endLineNumber,r.range.endColumn);r.cachedAbsoluteStart=s,r.cachedAbsoluteEnd=a,r.cachedVersionId=e,r.start=s-o,r.end=a-o,(0,l.recomputeMaxEnd)(r)}},g.prototype.onBeforeAttached=function(){this._attachedEditorCount++,1===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)},g.prototype.onBeforeDetached=function(){this._attachedEditorCount--,0===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)},g.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},g.prototype.getAttachedEditorCount=function(){return this._attachedEditorCount},g.prototype.isTooLargeForSyncing=function(){return this._isTooLargeForSyncing},g.prototype.isTooLargeForTokenization=function(){return this._isTooLargeForTokenization},g.prototype.isDisposed=function(){return this._isDisposed},g.prototype.isDominatedByLongLines=function(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;for(var e=0,t=0,n=this._buffer.getLineCount(),i=1;i<=n;i++){var r=this._buffer.getLineLength(i);r>=M?t+=r:e+=r}return t>e},Object.defineProperty(g.prototype,\"uri\",{get:function(){return this._associatedResource},enumerable:!0,configurable:!0}),g.prototype.getOptions=function(){return this._assertNotDisposed(),this._options},g.prototype.getFormattingOptions=function(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}},g.prototype.updateOptions=function(e){this._assertNotDisposed();var t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,n=void 0!==e.indentSize?e.indentSize:this._options.indentSize,i=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,r=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=new f.TextModelResolvedOptions({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r});if(!this._options.equals(o)){var s=this._options.createChangeEvent(o);this._options=o,this._onDidChangeOptions.fire(s)}},g.prototype.detectIndentation=function(e,t){this._assertNotDisposed();var n=(0,h.guessIndentation)(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})},g._normalizeIndentationFromWhitespace=function(e,t,n){for(var i=0,r=0;r<e.length;r++)\"\\t\"===e.charAt(r)?i+=t:i++;var o=\"\";if(!n){var s=Math.floor(i/t);i%=t;for(r=0;r<s;r++)o+=\"\\t\"}for(r=0;r<i;r++)o+=\" \";return o},g.normalizeIndentation=function(e,t,n){var r=i.firstNonWhitespaceIndex(e);return-1===r&&(r=e.length),g._normalizeIndentationFromWhitespace(e.substring(0,r),t,n)+e.substring(r)},g.prototype.normalizeIndentation=function(e){return this._assertNotDisposed(),g.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)},g.prototype.getVersionId=function(){return this._assertNotDisposed(),this._versionId},g.prototype.mightContainRTL=function(){return this._buffer.mightContainRTL()},g.prototype.mightContainNonBasicASCII=function(){return this._buffer.mightContainNonBasicASCII()},g.prototype.getAlternativeVersionId=function(){return this._assertNotDisposed(),this._alternativeVersionId},g.prototype.getOffsetAt=function(e){this._assertNotDisposed();var t=this._validatePosition(e.lineNumber,e.column,!1);return this._buffer.getOffsetAt(t.lineNumber,t.column)},g.prototype.getPositionAt=function(e){this._assertNotDisposed();var t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)},g.prototype._increaseVersionId=function(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId},g.prototype._overwriteAlternativeVersionId=function(e){this._alternativeVersionId=e},g.prototype.getValue=function(e,t){void 0===t&&(t=!1),this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i},g.prototype.getValueLength=function(e,t){void 0===t&&(t=!1),this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i},g.prototype.getValueInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)},g.prototype.getValueLengthInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)},g.prototype.getCharacterCountInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)},g.prototype.getLineCount=function(){return this._assertNotDisposed(),this._buffer.getLineCount()},g.prototype.getLineContent=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._buffer.getLineContent(e)},g.prototype.getLineLength=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._buffer.getLineLength(e)},g.prototype.getLinesContent=function(){return this._assertNotDisposed(),this._buffer.getLinesContent()},g.prototype.getEOL=function(){return this._assertNotDisposed(),this._buffer.getEOL()},g.prototype.getLineMinColumn=function(e){return this._assertNotDisposed(),1},g.prototype.getLineMaxColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._buffer.getLineLength(e)+1},g.prototype.getLineFirstNonWhitespaceColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._buffer.getLineFirstNonWhitespaceColumn(e)},g.prototype.getLineLastNonWhitespaceColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._buffer.getLineLastNonWhitespaceColumn(e)},g.prototype._validateRangeRelaxedNoAllocations=function(e){var t,n,i=this._buffer.getLineCount(),r=e.startLineNumber,o=e.startColumn;if(r<1)t=1,n=1;else if(r>i)t=i,n=this.getLineMaxColumn(t);else{if(t=0|r,o<=1)n=1;else n=o>=(l=this.getLineMaxColumn(t))?l:0|o}var s,f,d=e.endLineNumber,h=e.endColumn;if(d<1)s=1,f=1;else if(d>i)s=i,f=this.getLineMaxColumn(s);else{var l;if(s=0|d,h<=1)f=1;else f=h>=(l=this.getLineMaxColumn(s))?l:0|h}return r===t&&o===n&&d===s&&h===f&&e instanceof a.Range&&!(e instanceof u.Selection)?e:new a.Range(t,n,s,f)},g.prototype._isValidPosition=function(e,t,n){if(\"number\"!=typeof e||\"number\"!=typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(t>this.getLineMaxColumn(e))return!1;if(n&&t!==i.getCharContainingOffset(this._buffer.getLineContent(e),t-1)[0]+1)return!1;return!0},g.prototype._validatePosition=function(e,t,n){var r=Math.floor(\"number\"!=typeof e||isNaN(e)?1:e),o=Math.floor(\"number\"!=typeof t||isNaN(t)?1:t),a=this._buffer.getLineCount();if(r<1)return new s.Position(1,1);if(r>a)return new s.Position(a,this.getLineMaxColumn(a));if(o<=1)return new s.Position(r,1);var u=this.getLineMaxColumn(r);if(o>=u)return new s.Position(r,u);if(n){var f=i.getCharContainingOffset(this._buffer.getLineContent(r),o-1)[0];if(o!==f+1)return new s.Position(r,f+1)}return new s.Position(r,o)},g.prototype.validatePosition=function(e){return this._assertNotDisposed(),e instanceof s.Position&&this._isValidPosition(e.lineNumber,e.column,!0)?e:this._validatePosition(e.lineNumber,e.column,!0)},g.prototype._isValidRange=function(e,t){var n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,r,!1))return!1;if(!this._isValidPosition(o,s,!1))return!1;if(t){var a=this._buffer.getLineContent(n);if(r<a.length+1)if(r!==i.getCharContainingOffset(a,r-1)[0]+1)return!1;if(s>=2){var u=o===n?a:this._buffer.getLineContent(o);if(s!==i.getCharContainingOffset(u,s-2)[1]+1)return!1}return!0}return!0},g.prototype.validateRange=function(e){if(this._assertNotDisposed(),e instanceof a.Range&&!(e instanceof u.Selection)&&this._isValidRange(e,!0))return e;var t=this._validatePosition(e.startLineNumber,e.startColumn,!1),n=this._validatePosition(e.endLineNumber,e.endColumn,!1),r=t.lineNumber,o=t.column,s=n.lineNumber,f=n.column,d=r===s&&o===f,h=this._buffer.getLineContent(r);if(o<h.length+1){var l=i.getCharContainingOffset(h,o-1)[0];if(o!==l+1){if(d)return new a.Range(r,l+1,r,l+1);o=l+1}}if(f>=2){var g=s===r?h:this._buffer.getLineContent(s),c=i.getCharContainingOffset(g,f-2)[1];f!==c+1&&(f=c+1)}return new a.Range(r,o,s,f)},g.prototype.modifyPosition=function(e,t){this._assertNotDisposed();var n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))},g.prototype.getFullModelRange=function(){this._assertNotDisposed();var e=this.getLineCount();return new a.Range(1,1,e,this.getLineMaxColumn(e))},g.prototype.findMatchesLineByLine=function(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)},g.prototype.findMatches=function(e,t,n,i,r,o,s){var u;if(void 0===s&&(s=S),this._assertNotDisposed(),u=a.Range.isIRange(t)?this.validateRange(t):this.getFullModelRange(),!n&&e.indexOf(\"\\n\")<0){var f=new p.SearchParams(e,n,i,r).parseSearchRequest();return f?this.findMatchesLineByLine(u,f,o,s):[]}return p.TextModelSearch.findMatches(this,new p.SearchParams(e,n,i,r),u,o,s)},g.prototype.findNextMatch=function(e,t,n,i,r,o){this._assertNotDisposed();var s=this.validatePosition(t);if(!n&&e.indexOf(\"\\n\")<0){var u=new p.SearchParams(e,n,i,r).parseSearchRequest();if(!u)return null;var f=this.getLineCount(),d=new a.Range(s.lineNumber,s.column,f,this.getLineMaxColumn(f)),h=this.findMatchesLineByLine(d,u,o,1);return p.TextModelSearch.findNextMatch(this,new p.SearchParams(e,n,i,r),s,o),h.length>0?h[0]:(d=new a.Range(1,1,s.lineNumber,this.getLineMaxColumn(s.lineNumber)),(h=this.findMatchesLineByLine(d,u,o,1)).length>0?h[0]:null)}return p.TextModelSearch.findNextMatch(this,new p.SearchParams(e,n,i,r),s,o)},g.prototype.findPreviousMatch=function(e,t,n,i,r,o){this._assertNotDisposed();var s=this.validatePosition(t);return p.TextModelSearch.findPreviousMatch(this,new p.SearchParams(e,n,i,r),s,o)},g.prototype.pushStackElement=function(){this._commandManager.pushStackElement()},g.prototype.pushEOL=function(e){if((\"\\n\"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},g.prototype.pushEditOperations=function(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,t,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},g.prototype._pushEditOperations=function(e,t,n){var i=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){for(var r=t.map(function(e){return{range:i.validateRange(e.range),text:e.text}}),o=!0,s=0,u=e.length;s<u;s++){for(var f=e[s],d=!1,h=0,l=r.length;h<l;h++){var g=(v=r[h].range).startLineNumber>f.endLineNumber,c=f.startLineNumber>v.endLineNumber;if(!g&&!c){d=!0;break}}if(!d){o=!1;break}}if(o)for(s=0,u=this._trimAutoWhitespaceLines.length;s<u;s++){var p=this._trimAutoWhitespaceLines[s],_=this.getLineMaxColumn(p),m=!0;for(h=0,l=r.length;h<l;h++){var v=r[h].range,C=r[h].text;if(!(p<v.startLineNumber||p>v.endLineNumber)&&!(p===v.startLineNumber&&v.startColumn===_&&v.isEmpty()&&C&&C.length>0&&\"\\n\"===C.charAt(0)||p===v.startLineNumber&&1===v.startColumn&&v.isEmpty()&&C&&C.length>0&&\"\\n\"===C.charAt(C.length-1))){m=!1;break}}m&&t.push({range:new a.Range(p,1,p,_),text:null})}this._trimAutoWhitespaceLines=null}return this._commandManager.pushEditOperation(e,t,n)},g.prototype.applyEdits=function(e){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._applyEdits(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},g.prototype._applyEdits=function(e){for(var t=0,n=e.length;t<n;t++)e[t].range=this.validateRange(e[t].range);var i=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace),o=this._buffer.getLineCount(),s=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,0!==s.length){var a=[],u=i;for(t=0,n=s.length;t<n;t++){var f=s[t],d=(0,b.countEOL)(f.text),h=d[0],l=d[1],g=d[2];this._tokens.acceptEdit(f.range,h,l),this._tokens2.acceptEdit(f.range,h,l,g,f.text.length>0?f.text.charCodeAt(0):0),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers);for(var p=f.range.startLineNumber,_=f.range.endLineNumber,m=_-p,v=h,C=Math.min(m,v),L=v-m,D=C;D>=0;D--){var y=p+D,I=o-u-L+y;a.push(new c.ModelRawLineChanged(y,this.getLineContent(I)))}if(C<m){var E=p+C;a.push(new c.ModelRawLinesDeleted(E+1,_))}if(C<v){for(var N=p+C,k=v-C,O=o-u-k+N+1,T=[],R=0;R<k;R++){var w=O+R;T[w-O]=this.getLineContent(w)}a.push(new c.ModelRawLinesInserted(N+1,p+v,T))}u+=L}this._increaseVersionId(),this._emitContentChangedEvent(new c.ModelRawContentChangedEvent(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits},g.prototype._undo=function(){this._isUndoing=!0;var e=this._commandManager.undo();return this._isUndoing=!1,e?(this._overwriteAlternativeVersionId(e.recordedVersionId),e.selections):null},g.prototype.undo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._undo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},g.prototype.canUndo=function(){return this._commandManager.canUndo()},g.prototype._redo=function(){this._isRedoing=!0;var e=this._commandManager.redo();return this._isRedoing=!1,e?(this._overwriteAlternativeVersionId(e.recordedVersionId),e.selections):null},g.prototype.redo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._redo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},g.prototype.canRedo=function(){return this._commandManager.canRedo()},g.prototype.changeDecorations=function(e,t){void 0===t&&(t=0),this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}},g.prototype._changeDecorations=function(t,n){var i=this,r={addDecoration:function(e,n){return i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,[],[{range:e,options:n}])[0]},changeDecoration:function(e,t){i._onDidChangeDecorations.fire(),i._changeDecorationImpl(e,t)},changeDecorationOptions:function(e,t){i._onDidChangeDecorations.fire(),i._changeDecorationOptionsImpl(e,j(t))},removeDecoration:function(e){i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,[e],[])},deltaDecorations:function(e,n){return 0===e.length&&0===n.length?[]:(i._onDidChangeDecorations.fire(),i._deltaDecorationsImpl(t,e,n))}},o=null;try{o=n(r)}catch(s){(0,e.onUnexpectedError)(s)}return r.addDecoration=x,r.changeDecoration=x,r.changeDecorationOptions=x,r.removeDecoration=x,r.deltaDecorations=x,o},g.prototype.deltaDecorations=function(e,t,n){if(void 0===n&&(n=0),this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}},g.prototype._getTrackedRange=function(e){return this.getDecorationRange(e)},g.prototype._setTrackedRange=function(e,t,n){var i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:U[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;var r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),s=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,s,r),i.setOptions(U[n]),this._decorationsTree.insert(i),i.id},g.prototype.removeAllDecorationsWithOwnerId=function(e){if(!this._isDisposed)for(var t=this._decorationsTree.collectNodesFromOwner(e),n=0,i=t.length;n<i;n++){var r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}},g.prototype.getDecorationOptions=function(e){var t=this._decorations[e];return t?t.options:null},g.prototype.getDecorationRange=function(e){var t=this._decorations[e];if(!t)return null;var n=this.getVersionId();return t.cachedVersionId!==n&&this._decorationsTree.resolveNode(t,n),null===t.range&&(t.range=this._getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range},g.prototype.getLineDecorations=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=!1),e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)},g.prototype.getLinesDecorations=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),s=Math.min(r,Math.max(1,t)),u=this.getLineMaxColumn(s);return this._getDecorationsInRange(new a.Range(o,1,s,u),n,i)},g.prototype.getDecorationsInRange=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var i=this.validateRange(e);return this._getDecorationsInRange(i,t,n)},g.prototype.getOverviewRulerDecorations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var n=this.getVersionId(),i=this._decorationsTree.search(e,t,!0,n);return this._ensureNodesHaveRanges(i)},g.prototype.getAllDecorations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var n=this.getVersionId(),i=this._decorationsTree.search(e,t,!1,n);return this._ensureNodesHaveRanges(i)},g.prototype._getDecorationsInRange=function(e,t,n){var i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),o=this.getVersionId(),s=this._decorationsTree.intervalSearch(i,r,t,n,o);return this._ensureNodesHaveRanges(s)},g.prototype._ensureNodesHaveRanges=function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];null===i.range&&(i.range=this._getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd))}return e},g.prototype._getRangeAt=function(e,t){return this._buffer.getRangeAt(e,t-e)},g.prototype._changeDecorationImpl=function(e,t){var n=this._decorations[e];if(n){var i=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,i),this._decorationsTree.insert(n)}},g.prototype._changeDecorationOptionsImpl=function(e,t){var n=this._decorations[e];n&&(!(!n.options.overviewRuler||!n.options.overviewRuler.color)!==!(!t.overviewRuler||!t.overviewRuler.color)?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t))},g.prototype._deltaDecorationsImpl=function(e,t,n){for(var i=this.getVersionId(),r=t.length,o=0,s=n.length,a=0,u=new Array(s);o<r||a<s;){var f=null;if(o<r){do{f=this._decorations[t[o++]]}while(!f&&o<r);f&&this._decorationsTree.delete(f)}if(a<s){if(!f){var d=++this._lastDecorationId,h=this._instanceId+\";\"+d;f=new l.IntervalNode(h,0,0),this._decorations[h]=f}var g=n[a],c=this._validateRangeRelaxedNoAllocations(g.range),p=j(g.options),_=this._buffer.getOffsetAt(c.startLineNumber,c.startColumn),m=this._buffer.getOffsetAt(c.endLineNumber,c.endColumn);f.ownerId=e,f.reset(i,_,m,c),f.setOptions(p),this._decorationsTree.insert(f),u[a]=f.id,a++}else f&&delete this._decorations[f.id]}return u},g.prototype.setLineTokens=function(e,t){if(e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");this._tokens.setTokens(this._languageIdentifier.id,e-1,this._buffer.getLineLength(e),t)},g.prototype.setTokens=function(e){if(0!==e.length){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push({fromLineNumber:r.startLineNumber,toLineNumber:r.startLineNumber+r.tokens.length-1});for(var o=0,s=r.tokens.length;o<s;o++)this.setLineTokens(r.startLineNumber+o,r.tokens[o])}this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,ranges:t})}},g.prototype.setSemanticTokens=function(e){this._tokens2.set(e),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})},g.prototype.tokenizeViewport=function(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)},g.prototype.clearTokens=function(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})},g.prototype._emitModelTokensChangedEvent=function(e){this._isDisposing||this._onDidChangeTokens.fire(e)},g.prototype.resetTokenization=function(){this._tokenization.reset()},g.prototype.forceTokenization=function(e){if(e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");this._tokenization.forceTokenization(e)},g.prototype.isCheapToTokenize=function(e){return this._tokenization.isCheapToTokenize(e)},g.prototype.tokenizeIfCheap=function(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)},g.prototype.getLineTokens=function(e){if(e<1||e>this.getLineCount())throw new Error(\"Illegal value for lineNumber\");return this._getLineTokens(e)},g.prototype._getLineTokens=function(e){var t=this.getLineContent(e),n=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,n)},g.prototype.getLanguageIdentifier=function(){return this._languageIdentifier},g.prototype.getModeId=function(){return this._languageIdentifier.language},g.prototype.setMode=function(e){if(this._languageIdentifier.id!==e.id){var t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}},g.prototype.getLanguageIdAtPosition=function(e,t){var n=this.validatePosition(new s.Position(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))},g.prototype.getWordAtPosition=function(e){this._assertNotDisposed();var t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),r=i.findTokenIndexAtOffset(t.column-1),o=g._findLanguageBoundaries(i,r),s=o[0],a=o[1],u=(0,m.getWordAtText)(t.column,v.LanguageConfigurationRegistry.getWordDefinition(i.getLanguageId(r)),n.substring(s,a),s);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u;if(r>0&&s===t.column-1){var f=g._findLanguageBoundaries(i,r-1),d=f[0],h=f[1],l=(0,m.getWordAtText)(t.column,v.LanguageConfigurationRegistry.getWordDefinition(i.getLanguageId(r-1)),n.substring(d,h),d);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l}return null},g._findLanguageBoundaries=function(e,t){for(var n=e.getLanguageId(t),i=0,r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);for(var o=e.getLineContent().length,s=(r=t,e.getCount());r<s&&e.getLanguageId(r)===n;r++)o=e.getEndOffset(r);return[i,o]},g.prototype.getWordUntilPosition=function(e){var t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:\"\",startColumn:e.column,endColumn:e.column}},g.prototype.findMatchingBracketUp=function(e,t){var n=e.toLowerCase(),i=this.validatePosition(t),r=this._getLineTokens(i.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(i.column-1)),s=v.LanguageConfigurationRegistry.getBracketsSupport(o);if(!s)return null;var a=s.textIsBracket[n];return a?this._findMatchingBracketUp(a,i):null},g.prototype.matchBracket=function(e){return this._matchBracket(this.validatePosition(e))},g.prototype._matchBracket=function(e){var t=e.lineNumber,n=this._getLineTokens(t),i=this._buffer.getLineContent(t),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;var o=v.LanguageConfigurationRegistry.getBracketsSupport(n.getLanguageId(r));if(o&&!(0,L.ignoreBracketsInToken)(n.getStandardTokenType(r))){for(var s=Math.max(0,e.column-1-o.maxBracketLength),a=Math.min(i.length,e.column-1+o.maxBracketLength),u=null;;){if(!(l=D.BracketsUtils.findNextBracketInRange(o.forwardRegex,t,i,s,a)))break;if(l.startColumn<=e.column&&e.column<=l.endColumn){var f=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase();(g=this._matchFoundBracket(l,o.textIsBracket[f],o.textIsOpenBracket[f]))&&(u=g)}s=l.endColumn-1}if(u)return u}if(r>0&&n.getStartOffset(r)===e.column-1){var d=r-1,h=v.LanguageConfigurationRegistry.getBracketsSupport(n.getLanguageId(d));if(h&&!(0,L.ignoreBracketsInToken)(n.getStandardTokenType(d))){var l;s=Math.max(0,e.column-1-h.maxBracketLength),a=Math.min(i.length,e.column-1+h.maxBracketLength);if((l=D.BracketsUtils.findPrevBracketInRange(h.reversedRegex,t,i,s,a))&&l.startColumn<=e.column&&e.column<=l.endColumn){var g;f=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(g=this._matchFoundBracket(l,h.textIsBracket[f],h.textIsOpenBracket[f]))return g}}}return null},g.prototype._matchFoundBracket=function(e,t,n){if(!t)return null;var i;if(n){if(i=this._findMatchingBracketDown(t,e.getEndPosition()))return[e,i]}else if(i=this._findMatchingBracketUp(t,e.getStartPosition()))return[e,i];return null},g.prototype._findMatchingBracketUp=function(e,t){for(var n=e.languageIdentifier.id,i=e.reversedRegex,r=-1,o=function(t,n,o,s){for(;;){var a=D.BracketsUtils.findPrevBracketInRange(i,t,n,o,s);if(!a)break;var u=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return a;s=a.startColumn-1}return null},s=t.lineNumber;s>=1;s--){var a=this._getLineTokens(s),u=a.getCount(),f=this._buffer.getLineContent(s),d=u-1,h=f.length,l=f.length;s===t.lineNumber&&(d=a.findTokenIndexAtOffset(t.column-1),h=t.column-1,l=t.column-1);for(var g=!0;d>=0;d--){var c,p=a.getLanguageId(d)===n&&!(0,L.ignoreBracketsInToken)(a.getStandardTokenType(d));if(p)g?h=a.getStartOffset(d):(h=a.getStartOffset(d),l=a.getEndOffset(d));else if(g&&h!==l)if(c=o(s,f,h,l))return c;g=p}if(g&&h!==l)if(c=o(s,f,h,l))return c}return null},g.prototype._findMatchingBracketDown=function(e,t){for(var n=e.languageIdentifier.id,i=e.forwardRegex,r=1,o=function(t,n,o,s){for(;;){var a=D.BracketsUtils.findNextBracketInRange(i,t,n,o,s);if(!a)break;var u=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return a;o=a.endColumn-1}return null},s=this.getLineCount(),a=t.lineNumber;a<=s;a++){var u=this._getLineTokens(a),f=u.getCount(),d=this._buffer.getLineContent(a),h=0,l=0,g=0;a===t.lineNumber&&(h=u.findTokenIndexAtOffset(t.column-1),l=t.column-1,g=t.column-1);for(var c=!0;h<f;h++){var p,_=u.getLanguageId(h)===n&&!(0,L.ignoreBracketsInToken)(u.getStandardTokenType(h));if(_)c?g=u.getEndOffset(h):(l=u.getStartOffset(h),g=u.getEndOffset(h));else if(c&&l!==g)if(p=o(a,d,l,g))return p;c=_}if(c&&l!==g)if(p=o(a,d,l,g))return p}return null},g.prototype.findPrevBracket=function(e){for(var t=this.validatePosition(e),n=-1,i=null,r=t.lineNumber;r>=1;r--){var o=this._getLineTokens(r),s=o.getCount(),a=this._buffer.getLineContent(r),u=s-1,f=a.length,d=a.length;if(r===t.lineNumber)u=o.findTokenIndexAtOffset(t.column-1),f=t.column-1,d=t.column-1,n!==(l=o.getLanguageId(u))&&(n=l,i=v.LanguageConfigurationRegistry.getBracketsSupport(n));for(var h=!0;u>=0;u--){var l;if(n!==(l=o.getLanguageId(u))){if(i&&h&&f!==d){if(g=D.BracketsUtils.findPrevBracketInRange(i.reversedRegex,r,a,f,d))return this._toFoundBracket(i,g);h=!1}n=l,i=v.LanguageConfigurationRegistry.getBracketsSupport(n)}var g,c=!!i&&!(0,L.ignoreBracketsInToken)(o.getStandardTokenType(u));if(c)h?f=o.getStartOffset(u):(f=o.getStartOffset(u),d=o.getEndOffset(u));else if(i&&h&&f!==d)if(g=D.BracketsUtils.findPrevBracketInRange(i.reversedRegex,r,a,f,d))return this._toFoundBracket(i,g);h=c}if(i&&h&&f!==d)if(g=D.BracketsUtils.findPrevBracketInRange(i.reversedRegex,r,a,f,d))return this._toFoundBracket(i,g)}return null},g.prototype.findNextBracket=function(e){for(var t=this.validatePosition(e),n=this.getLineCount(),i=-1,r=null,o=t.lineNumber;o<=n;o++){var s=this._getLineTokens(o),a=s.getCount(),u=this._buffer.getLineContent(o),f=0,d=0,h=0;if(o===t.lineNumber)f=s.findTokenIndexAtOffset(t.column-1),d=t.column-1,h=t.column-1,i!==(g=s.getLanguageId(f))&&(i=g,r=v.LanguageConfigurationRegistry.getBracketsSupport(i));for(var l=!0;f<a;f++){var g;if(i!==(g=s.getLanguageId(f))){if(r&&l&&d!==h){if(c=D.BracketsUtils.findNextBracketInRange(r.forwardRegex,o,u,d,h))return this._toFoundBracket(r,c);l=!1}i=g,r=v.LanguageConfigurationRegistry.getBracketsSupport(i)}var c,p=!!r&&!(0,L.ignoreBracketsInToken)(s.getStandardTokenType(f));if(p)l?h=s.getEndOffset(f):(d=s.getStartOffset(f),h=s.getEndOffset(f));else if(r&&l&&d!==h)if(c=D.BracketsUtils.findNextBracketInRange(r.forwardRegex,o,u,d,h))return this._toFoundBracket(r,c);l=p}if(r&&l&&d!==h)if(c=D.BracketsUtils.findNextBracketInRange(r.forwardRegex,o,u,d,h))return this._toFoundBracket(r,c)}return null},g.prototype.findEnclosingBrackets=function(e,t){var n=this;void 0===t&&(t=1073741824);for(var i=this.validatePosition(e),r=this.getLineCount(),o=new Map,s=[],a=function(e,t){if(!o.has(e)){for(var n=[],i=0,r=t?t.brackets.length:0;i<r;i++)n[i]=0;o.set(e,n)}s=o.get(e)},u=function(e,t,i,r,o){for(;;){var a=D.BracketsUtils.findNextBracketInRange(e.forwardRegex,t,i,r,o);if(!a)break;var u=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),f=e.textIsBracket[u];if(f&&(f.isOpen(u)?s[f.index]++:f.isClose(u)&&s[f.index]--,-1===s[f.index]))return n._matchFoundBracket(a,f,!1);r=a.endColumn-1}return null},f=-1,d=null,h=Date.now(),l=i.lineNumber;l<=r;l++){if(Date.now()-h>t)return null;var g=this._getLineTokens(l),c=g.getCount(),p=this._buffer.getLineContent(l),_=0,m=0,C=0;if(l===i.lineNumber)_=g.findTokenIndexAtOffset(i.column-1),m=i.column-1,C=i.column-1,f!==(b=g.getLanguageId(_))&&a(f=b,d=v.LanguageConfigurationRegistry.getBracketsSupport(f));for(var y=!0;_<c;_++){var b;if(f!==(b=g.getLanguageId(_))){if(d&&y&&m!==C){if(I=u(d,l,p,m,C))return I;y=!1}a(f=b,d=v.LanguageConfigurationRegistry.getBracketsSupport(f))}var I,E=!!d&&!(0,L.ignoreBracketsInToken)(g.getStandardTokenType(_));if(E)y?C=g.getEndOffset(_):(m=g.getStartOffset(_),C=g.getEndOffset(_));else if(d&&y&&m!==C)if(I=u(d,l,p,m,C))return I;y=E}if(d&&y&&m!==C)if(I=u(d,l,p,m,C))return I}return null},g.prototype._toFoundBracket=function(e,t){if(!t)return null;var n=this.getValueInRange(t);n=n.toLowerCase();var i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null},g.computeIndentLevel=function(e,t){for(var n=0,i=0,r=e.length;i<r;){var o=e.charCodeAt(i);if(32===o)n++;else{if(9!==o)break;n=n-n%t+t}i++}return i===r?-1:n},g.prototype._computeIndentLevel=function(e){return g.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)},g.prototype.getActiveIndentGuide=function(e,t,n){var i=this;this._assertNotDisposed();var r=this.getLineCount();if(e<1||e>r)throw new Error(\"Illegal value for lineNumber\");for(var o=v.LanguageConfigurationRegistry.getFoldingRules(this._languageIdentifier.id),s=Boolean(o&&o.offSide),a=-2,u=-1,f=-2,d=-1,h=function(e){if(-1!==a&&(-2===a||a>e-1)){a=-1,u=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){a=t,u=n;break}}}if(-2===f){f=-1,d=-1;for(t=e;t<r;t++){var o=i._computeIndentLevel(t);if(o>=0){f=t,d=o;break}}}},l=-2,g=-1,c=-2,p=-1,_=function(e){if(-2===l){l=-1,g=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){l=t,g=n;break}}}if(-1!==c&&(-2===c||c<e-1)){c=-1,p=-1;for(t=e;t<r;t++){var o=i._computeIndentLevel(t);if(o>=0){c=t,p=o;break}}}},m=0,C=!0,L=0,D=!0,y=0,b=0;C||D;b++){var I=e-b,E=e+b;if(0!==b&&(I<1||I<t)&&(C=!1),0!==b&&(E>r||E>n)&&(D=!1),b>5e4&&(C=!1,D=!1),C){var N=void 0;if((k=this._computeIndentLevel(I-1))>=0?(f=I-1,d=k,N=Math.ceil(k/this._options.indentSize)):(h(I),N=this._getIndentLevelForWhitespaceLine(s,u,d)),0===b){if(m=I,L=E,0===(y=N))return{startLineNumber:m,endLineNumber:L,indent:y};continue}N>=y?m=I:C=!1}if(D){var k,O=void 0;(k=this._computeIndentLevel(E-1))>=0?(l=E-1,g=k,O=Math.ceil(k/this._options.indentSize)):(_(E),O=this._getIndentLevelForWhitespaceLine(s,g,p)),O>=y?L=E:D=!1}}return{startLineNumber:m,endLineNumber:L,indent:y}},g.prototype.getLinesIndentGuides=function(e,t){this._assertNotDisposed();var n=this.getLineCount();if(e<1||e>n)throw new Error(\"Illegal value for startLineNumber\");if(t<1||t>n)throw new Error(\"Illegal value for endLineNumber\");for(var i=v.LanguageConfigurationRegistry.getFoldingRules(this._languageIdentifier.id),r=Boolean(i&&i.offSide),o=new Array(t-e+1),s=-2,a=-1,u=-2,f=-1,d=e;d<=t;d++){var h=d-e,l=this._computeIndentLevel(d-1);if(l>=0)s=d-1,a=l,o[h]=Math.ceil(l/this._options.indentSize);else{if(-2===s){s=-1,a=-1;for(var g=d-2;g>=0;g--){if((c=this._computeIndentLevel(g))>=0){s=g,a=c;break}}}if(-1!==u&&(-2===u||u<d-1)){u=-1,f=-1;for(g=d;g<n;g++){var c;if((c=this._computeIndentLevel(g))>=0){u=g,f=c;break}}}o[h]=this._getIndentLevelForWhitespaceLine(r,a,f)}}return o},g.prototype._getIndentLevelForWhitespaceLine=function(e,t,n){return-1===t||-1===n?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)},g.MODEL_SYNC_LIMIT=52428800,g.LARGE_FILE_SIZE_THRESHOLD=20971520,g.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,g.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:o.EDITOR_MODEL_DEFAULTS.tabSize,indentSize:o.EDITOR_MODEL_DEFAULTS.indentSize,insertSpaces:o.EDITOR_MODEL_DEFAULTS.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:o.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,largeFileOptimizations:o.EDITOR_MODEL_DEFAULTS.largeFileOptimizations},g}(n.Disposable);exports.TextModel=A;var B=function(){function e(){this._decorationsTree0=new l.IntervalTree,this._decorationsTree1=new l.IntervalTree}return e.prototype.intervalSearch=function(e,t,n,i,r){var o=this._decorationsTree0.intervalSearch(e,t,n,i,r),s=this._decorationsTree1.intervalSearch(e,t,n,i,r);return o.concat(s)},e.prototype.search=function(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);var r=this._decorationsTree0.search(e,t,i),o=this._decorationsTree1.search(e,t,i);return r.concat(o)},e.prototype.collectNodesFromOwner=function(e){var t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(n)},e.prototype.collectNodesPostOrder=function(){var e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)},e.prototype.insert=function(e){(0,l.getNodeIsInOverviewRuler)(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)},e.prototype.delete=function(e){(0,l.getNodeIsInOverviewRuler)(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)},e.prototype.resolveNode=function(e,t){(0,l.getNodeIsInOverviewRuler)(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)},e.prototype.acceptReplace=function(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i)},e}();function z(e){return e.replace(/[^a-z0-9\\-_]/gi,\" \")}var F=function(){return function(e){this.color=e.color||\"\",this.darkColor=e.darkColor||\"\"}}(),P=function(e){function t(t){var n=e.call(this,t)||this;return n._resolvedColor=null,n.position=\"number\"==typeof t.position?t.position:f.OverviewRulerLane.Center,n}return k(t,e),t.prototype.getColor=function(e){return this._resolvedColor||(\"light\"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor},t.prototype.invalidateCachedColor=function(){this._resolvedColor=null},t.prototype._resolveColor=function(e,t){if(\"string\"==typeof e)return e;var n=e?t.getColor(e.id):null;return n?n.toString():\"\"},t}(F);exports.ModelDecorationOverviewRulerOptions=P;var V=function(e){function t(t){var n=e.call(this,t)||this;return n.position=t.position,n}return k(t,e),t.prototype.getColor=function(e){return this._resolvedColor||(\"light\"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor},t.prototype.invalidateCachedColor=function(){this._resolvedColor=void 0},t.prototype._resolveColor=function(e,t){return\"string\"==typeof e?I.Color.fromHex(e):t.getColor(e.id)},t}(F);exports.ModelDecorationMinimapOptions=V;var W=function(){function e(e){this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?z(e.className):null,this.hoverMessage=(0,y.withUndefinedAsNull)(e.hoverMessage),this.glyphMarginHoverMessage=(0,y.withUndefinedAsNull)(e.glyphMarginHoverMessage),this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new P(e.overviewRuler):null,this.minimap=e.minimap?new V(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?z(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?z(e.linesDecorationsClassName):null,this.marginClassName=e.marginClassName?z(e.marginClassName):null,this.inlineClassName=e.inlineClassName?z(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?z(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?z(e.afterContentClassName):null}return e.register=function(t){return new e(t)},e.createDynamic=function(t){return new e(t)},e}();exports.ModelDecorationOptions=W,W.EMPTY=W.register({});var U=[W.register({stickiness:0}),W.register({stickiness:1}),W.register({stickiness:2}),W.register({stickiness:3})];function j(e){return e instanceof W?e:W.createDynamic(e)}var q=function(e){function n(){var n=e.call(this)||this;return n._actual=n._register(new t.Emitter),n.event=n._actual.event,n._deferredCnt=0,n._shouldFire=!1,n}return k(n,e),n.prototype.beginDeferredEmit=function(){this._deferredCnt++},n.prototype.endDeferredEmit=function(){this._deferredCnt--,0===this._deferredCnt&&this._shouldFire&&(this._shouldFire=!1,this._actual.fire({}))},n.prototype.fire=function(){this._shouldFire=!0},n}(n.Disposable);exports.DidChangeDecorationsEmitter=q;var H=function(e){function n(){var n=e.call(this)||this;return n._fastEmitter=n._register(new t.Emitter),n.fastEvent=n._fastEmitter.event,n._slowEmitter=n._register(new t.Emitter),n.slowEvent=n._slowEmitter.event,n._deferredCnt=0,n._deferredEvent=null,n}return k(n,e),n.prototype.beginDeferredEmit=function(){this._deferredCnt++},n.prototype.endDeferredEmit=function(){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){var e=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(e),this._slowEmitter.fire(e)}},n.prototype.fire=function(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))},n}(n.Disposable);exports.DidChangeContentEmitter=H;"},"sourceMaps":null,"error":null,"hash":"373088a0c0f1e8896a5fea5d1f554abf","cacheData":{"env":{}}}
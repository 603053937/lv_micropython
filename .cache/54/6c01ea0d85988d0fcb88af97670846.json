{"id":"xI0S","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607046859852},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607046859848},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607047108423},{"name":"../../../base/common/strings.js","loc":{"line":5,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/linesLayout.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.LinesLayout=exports.EditorWhitespace=void 0;var e=i(require(\"../../../base/common/strings.js\"));function t(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var i=t();if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in e)if(Object.prototype.hasOwnProperty.call(e,h)){var s=r?Object.getOwnPropertyDescriptor(e,h):null;s&&(s.get||s.set)?Object.defineProperty(n,h,s):n[h]=e[h]}return n.default=e,i&&i.set(e,n),n}var n=function(){function e(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}return e.prototype.insert=function(e){this._hasPending=!0,this._inserts.push(e)},e.prototype.change=function(e){this._hasPending=!0,this._changes.push(e)},e.prototype.remove=function(e){this._hasPending=!0,this._removes.push(e)},e.prototype.mustCommit=function(){return this._hasPending},e.prototype.commit=function(e){if(this._hasPending){var t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}},e}(),r=function(){return function(e,t,i,n,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=r,this.prefixSum=0}}();exports.EditorWhitespace=r;var h=function(){function t(i,r){this._instanceId=e.singleLetterHash(++t.INSTANCE_COUNT),this._pendingChanges=new n,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=i,this._lineHeight=r}return t.findInsertionIndex=function(e,t,i){for(var n=0,r=e.length;n<r;){var h=n+r>>>1;t===e[h].afterLineNumber?i<e[h].ordinal?r=h:n=h+1:t<e[h].afterLineNumber?r=h:n=h+1}return n},t.prototype.setLineHeight=function(e){this._checkPendingChanges(),this._lineHeight=e},t.prototype.onFlushed=function(e){this._checkPendingChanges(),this._lineCount=e},t.prototype.changeWhitespace=function(e){var t=this;try{return e({insertWhitespace:function(e,i,n,h){e|=0,i|=0,n|=0,h|=0;var s=t._instanceId+ ++t._lastWhitespaceId;return t._pendingChanges.insert(new r(s,e,i,n,h)),s},changeOneWhitespace:function(e,i,n){i|=0,n|=0,t._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:n})},removeWhitespace:function(e){t._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}},t.prototype._commitPendingChanges=function(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(var n=0,r=e;n<r.length;n++){var h=r[n];this._insertWhitespace(h)}for(var s=0,a=t;s<a.length;s++){var o=a[s];this._changeOneWhitespace(o.id,o.newAfterLineNumber,o.newHeight)}for(var c=0,f=i;c<f.length;c++){var u=f[c],g=this._findWhitespaceIndex(u.id);-1!==g&&this._removeWhitespace(g)}}else{for(var p=new Set,d=0,_=i;d<_.length;d++){u=_[d];p.add(u.id)}for(var l=new Map,m=0,W=t;m<W.length;m++){o=W[m];l.set(o.id,o)}var v=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];if(!p.has(r.id)){if(l.has(r.id)){var h=l.get(r.id);r.afterLineNumber=h.newAfterLineNumber,r.height=h.newHeight}t.push(r)}}return t},x=v(this._arr).concat(v(e));x.sort(function(e,t){return e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber}),this._arr=x,this._prefixSumValidIndex=-1}},t.prototype._checkPendingChanges=function(){this._pendingChanges.mustCommit()&&(console.warn(\"Commiting pending changes before change accessor leaves due to read access.\"),this._pendingChanges.commit(this))},t.prototype._insertWhitespace=function(e){var i=t.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(i,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)},t.prototype._findWhitespaceIndex=function(e){for(var t=this._arr,i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1},t.prototype._changeOneWhitespace=function(e,t,i){var n=this._findWhitespaceIndex(e);if(-1!==n&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){var r=this._arr[n];this._removeWhitespace(n),r.afterLineNumber=t,this._insertWhitespace(r)}},t.prototype._removeWhitespace=function(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)},t.prototype.onLinesDeleted=function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(var i=0,n=this._arr.length;i<n;i++){var r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}},t.prototype.onLinesInserted=function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(var i=0,n=this._arr.length;i<n;i++){e<=this._arr[i].afterLineNumber&&(this._arr[i].afterLineNumber+=t-e+1)}},t.prototype.getWhitespacesTotalHeight=function(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)},t.prototype.getWhitespacesAccumulatedHeight=function(e){this._checkPendingChanges(),e|=0;var t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(var i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum},t.prototype.getLinesTotalHeight=function(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()},t.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){this._checkPendingChanges(),e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)},t.prototype._findLastWhitespaceBeforeLineNumber=function(e){e|=0;for(var t=this._arr,i=0,n=t.length-1;i<=n;){var r=i+((n-i|0)/2|0)|0;if(t[r].afterLineNumber<e){if(r+1>=t.length||t[r+1].afterLineNumber>=e)return r;i=r+1|0}else n=r-1|0}return-1},t.prototype._findFirstWhitespaceAfterLineNumber=function(e){e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1},t.prototype.getFirstWhitespaceIndexAfterLineNumber=function(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)},t.prototype.getVerticalOffsetForLineNumber=function(e){return this._checkPendingChanges(),((e|=0)>1?this._lineHeight*(e-1):0)+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e)},t.prototype.getWhitespaceMinWidth=function(){if(this._checkPendingChanges(),-1===this._minWidth){for(var e=0,t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth},t.prototype.isAfterLines=function(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()},t.prototype.getLineNumberAtOrAfterVerticalOffset=function(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;for(var t=0|this._lineCount,i=this._lineHeight,n=1,r=t;n<r;){var h=(n+r)/2|0,s=0|this.getVerticalOffsetForLineNumber(h);if(e>=s+i)n=h+1;else{if(e>=s)return h;r=h}}return n>t?t:n},t.prototype.getLinesViewportData=function(e,t){this._checkPendingChanges(),e|=0,t|=0;var i,n,r=this._lineHeight,h=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(h),a=0|this._lineCount,o=0|this.getFirstWhitespaceIndexAfterLineNumber(h),c=0|this.getWhitespacesCount();-1===o?(o=c,n=a+1,i=0):(n=0|this.getAfterLineNumberForWhitespaceIndex(o),i=0|this.getHeightForWhitespaceIndex(o));var f=s,u=f,g=0;s>=5e5&&(g=5e5*Math.floor(s/5e5),u-=g=Math.floor(g/r)*r);for(var p=[],d=e+(t-e)/2,_=-1,l=h;l<=a;l++){if(-1===_){(f<=d&&d<f+r||f>d)&&(_=l)}for(f+=r,p[l-h]=u,u+=r;n===l;)u+=i,f+=i,++o>=c?n=a+1:(n=0|this.getAfterLineNumberForWhitespaceIndex(o),i=0|this.getHeightForWhitespaceIndex(o));if(f>=t){a=l;break}}-1===_&&(_=a);var m=0|this.getVerticalOffsetForLineNumber(a),W=h,v=a;return W<v&&s<e&&W++,W<v&&m+r>t&&v--,{bigNumbersDelta:g,startLineNumber:h,endLineNumber:a,relativeVerticalOffset:p,centeredLineNumber:_,completelyVisibleStartLineNumber:W,completelyVisibleEndLineNumber:v}},t.prototype.getVerticalOffsetForWhitespaceIndex=function(e){this._checkPendingChanges(),e|=0;var t=this.getAfterLineNumberForWhitespaceIndex(e);return(t>=1?this._lineHeight*t:0)+(e>0?this.getWhitespacesAccumulatedHeight(e-1):0)},t.prototype.getWhitespaceIndexAtOrAfterVerticallOffset=function(e){this._checkPendingChanges(),e|=0;var t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(i)+this.getHeightForWhitespaceIndex(i))return-1;for(;t<i;){var n=Math.floor((t+i)/2),r=this.getVerticalOffsetForWhitespaceIndex(n);if(e>=r+this.getHeightForWhitespaceIndex(n))t=n+1;else{if(e>=r)return n;i=n}}return t},t.prototype.getWhitespaceAtVerticalOffset=function(e){this._checkPendingChanges(),e|=0;var t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;var i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;var n=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:i,height:n}},t.prototype.getWhitespaceViewportData=function(e,t){this._checkPendingChanges(),e|=0,t|=0;var i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];for(var r=[],h=i;h<=n;h++){var s=this.getVerticalOffsetForWhitespaceIndex(h),a=this.getHeightForWhitespaceIndex(h);if(s>=t)break;r.push({id:this.getIdForWhitespaceIndex(h),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(h),verticalOffset:s,height:a})}return r},t.prototype.getWhitespaces=function(){return this._checkPendingChanges(),this._arr.slice(0)},t.prototype.getWhitespacesCount=function(){return this._checkPendingChanges(),this._arr.length},t.prototype.getIdForWhitespaceIndex=function(e){return this._checkPendingChanges(),e|=0,this._arr[e].id},t.prototype.getAfterLineNumberForWhitespaceIndex=function(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber},t.prototype.getHeightForWhitespaceIndex=function(e){return this._checkPendingChanges(),e|=0,this._arr[e].height},t.INSTANCE_COUNT=0,t}();exports.LinesLayout=h;"},"sourceMaps":null,"error":null,"hash":"1ddb703be14da247d4ed31c4e3fd8ad2","cacheData":{"env":{}}}
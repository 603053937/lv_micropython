{"id":"FUrW","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607286873532},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607286873524},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607287523892},{"name":"../../../base/common/lifecycle.js","loc":{"line":25,"column":41},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../base/common/strings.js","loc":{"line":26,"column":23},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"},{"name":"../../browser/editorExtensions.js","loc":{"line":27,"column":81},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"},{"name":"../../common/core/range.js","loc":{"line":28,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../common/core/selection.js","loc":{"line":29,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js"},{"name":"../../common/editorContextKeys.js","loc":{"line":30,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/editorContextKeys.js"},{"name":"../suggest/suggest.js","loc":{"line":31,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggest.js"},{"name":"../../../platform/contextkey/common/contextkey.js","loc":{"line":32,"column":66},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js"},{"name":"../../../platform/log/common/log.js","loc":{"line":33,"column":28},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/log/common/log.js"},{"name":"./snippetSession.js","loc":{"line":34,"column":31},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetSession.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SnippetController2=void 0;var e=require(\"../../../base/common/lifecycle.js\"),t=require(\"../../../base/common/strings.js\"),i=require(\"../../browser/editorExtensions.js\"),o=require(\"../../common/core/range.js\"),s=require(\"../../common/core/selection.js\"),n=require(\"../../common/editorContextKeys.js\"),r=require(\"../suggest/suggest.js\"),p=require(\"../../../platform/contextkey/common/contextkey.js\"),a=require(\"../../../platform/log/common/log.js\"),h=require(\"./snippetSession.js\"),d=function(){return(d=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},c=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var p=e.length-1;p>=0;p--)(s=e[p])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},l=function(e,t){return function(i,o){t(i,o,e)}},u={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0},_=function(){function i(t,o,s){this._editor=t,this._logService=o,this._snippetListener=new e.DisposableStore,this._modelVersionId=-1,this._inSnippet=i.InSnippetMode.bindTo(s),this._hasNextTabstop=i.HasNextTabstop.bindTo(s),this._hasPrevTabstop=i.HasPrevTabstop.bindTo(s)}return i.get=function(e){return e.getContribution(i.ID)},i.prototype.dispose=function(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(0,e.dispose)(this._session),this._snippetListener.dispose()},i.prototype.insert=function(e,t){try{this._doInsert(e,void 0===t?u:d(d({},u),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error(\"snippet_error\"),this._logService.error(\"insert_template=\",e),this._logService.error(\"existing_template=\",this._session?this._session._logInfo():\"<no_session>\")}},i.prototype._doInsert=function(e,t){var i=this;this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new h.SnippetSession(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(function(e){return e.isFlush&&i.cancel()})),this._snippetListener.add(this._editor.onDidChangeModel(function(){return i.cancel()})),this._snippetListener.add(this._editor.onDidChangeCursorSelection(function(){return i._updateState()})))},i.prototype._updateState=function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}},i.prototype._handleChoice=function(){var e=this;if(this._session&&this._editor.hasModel()){var i=this._session.choice;if(i){if(this._currentChoice!==i){this._currentChoice=i,this._editor.setSelections(this._editor.getSelections().map(function(e){return s.Selection.fromPositions(e.getStartPosition())}));var n=i.options[0];(0,r.showSimpleSuggestions)(this._editor,i.options.map(function(i,s){return{kind:13,label:i.value,insertText:i.value,sortText:(0,t.repeat)(\"a\",s+1),range:o.Range.fromPositions(e._editor.getPosition(),e._editor.getPosition().delta(0,n.value.length))}}))}}else this._currentChoice=void 0}else this._currentChoice=void 0},i.prototype.finish=function(){for(;this._inSnippet.get();)this.next()},i.prototype.cancel=function(t){void 0===t&&(t=!1),this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(0,e.dispose)(this._session),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])},i.prototype.prev=function(){this._session&&this._session.prev(),this._updateState()},i.prototype.next=function(){this._session&&this._session.next(),this._updateState()},i.prototype.isInSnippet=function(){return Boolean(this._inSnippet.get())},i.ID=\"snippetController2\",i.InSnippetMode=new p.RawContextKey(\"inSnippetMode\",!1),i.HasNextTabstop=new p.RawContextKey(\"hasNextTabstop\",!1),i.HasPrevTabstop=new p.RawContextKey(\"hasPrevTabstop\",!1),i=c([l(1,a.ILogService),l(2,p.IContextKeyService)],i)}();exports.SnippetController2=_,(0,i.registerEditorContribution)(_.ID,_);var f=i.EditorCommand.bindToContribution(_.get);(0,i.registerEditorCommand)(new f({id:\"jumpToNextSnippetPlaceholder\",precondition:p.ContextKeyExpr.and(_.InSnippetMode,_.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:n.EditorContextKeys.editorTextFocus,primary:2}})),(0,i.registerEditorCommand)(new f({id:\"jumpToPrevSnippetPlaceholder\",precondition:p.ContextKeyExpr.and(_.InSnippetMode,_.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:n.EditorContextKeys.editorTextFocus,primary:1026}})),(0,i.registerEditorCommand)(new f({id:\"leaveSnippet\",precondition:_.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:n.EditorContextKeys.editorTextFocus,primary:9,secondary:[1033]}})),(0,i.registerEditorCommand)(new f({id:\"acceptSnippet\",precondition:_.InSnippetMode,handler:function(e){return e.finish()}}));"},"sourceMaps":null,"error":null,"hash":"e3d49e9c6aab21031abb37ff2a57592b","cacheData":{"env":{}}}
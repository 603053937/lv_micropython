{"id":"C068","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1608591005023},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1608591005019},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1608591256872},{"name":"../../../base/common/arrays.js","loc":{"line":5,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/arrays.js"},{"name":"../../../base/common/async.js","loc":{"line":6,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/errors.js","loc":{"line":7,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../base/common/event.js","loc":{"line":8,"column":24},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/event.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":9,"column":55},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../common/core/selection.js","loc":{"line":10,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js"},{"name":"../../common/modes.js","loc":{"line":11,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"./completionModel.js","loc":{"line":12,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/completionModel.js"},{"name":"./suggest.js","loc":{"line":13,"column":109},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggest.js"},{"name":"../snippet/snippetController2.js","loc":{"line":14,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js"},{"name":"../../../base/common/cancellation.js","loc":{"line":15,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/cancellation.js"},{"name":"./wordDistance.js","loc":{"line":16,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordDistance.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SuggestModel=exports.LineContext=void 0;var e=require(\"../../../base/common/arrays.js\"),t=require(\"../../../base/common/async.js\"),i=require(\"../../../base/common/errors.js\"),o=require(\"../../../base/common/event.js\"),s=require(\"../../../base/common/lifecycle.js\"),n=require(\"../../common/core/selection.js\"),r=require(\"../../common/modes.js\"),a=require(\"./completionModel.js\"),d=require(\"./suggest.js\"),h=require(\"../snippet/snippetController2.js\"),l=require(\"../../../base/common/cancellation.js\"),c=require(\"./wordDistance.js\"),g=function(){function e(e,t,i,o){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=o}return e.shouldAutoTrigger=function(e){if(!e.hasModel())return!1;var t=e.getModel(),i=e.getPosition();t.tokenizeIfCheap(i.lineNumber);var o=t.getWordAtPosition(i);return!!o&&(o.endColumn===i.column&&!!isNaN(Number(o.word)))},e}();exports.LineContext=g;var u=function(){function u(e,i){var a=this;this._editor=e,this._editorWorker=i,this._toDispose=new s.DisposableStore,this._quickSuggestDelay=10,this._triggerQuickSuggest=new t.TimeoutTimer,this._state=0,this._completionDisposables=new s.DisposableStore,this._onDidCancel=new o.Emitter,this._onDidTrigger=new o.Emitter,this._onDidSuggest=new o.Emitter,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._currentSelection=this._editor.getSelection()||new n.Selection(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(function(){a._updateTriggerCharacters(),a.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(function(){a._updateTriggerCharacters(),a.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(function(){a._updateTriggerCharacters(),a._updateQuickSuggest()})),this._toDispose.add(r.CompletionProviderRegistry.onDidChange(function(){a._updateTriggerCharacters(),a._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(function(e){a._onCursorChange(e)}));var d=!1;this._toDispose.add(this._editor.onCompositionStart(function(){d=!0})),this._toDispose.add(this._editor.onCompositionEnd(function(){d=!1,a._refilterCompletionItems()})),this._toDispose.add(this._editor.onDidChangeModelContent(function(){d||a._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}return u.prototype.dispose=function(){(0,s.dispose)(this._triggerCharacterListener),(0,s.dispose)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()},u.prototype._updateQuickSuggest=function(){this._quickSuggestDelay=this._editor.getOption(64),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)},u.prototype._updateTriggerCharacters=function(){var e=this;if((0,s.dispose)(this._triggerCharacterListener),!this._editor.getOption(65)&&this._editor.hasModel()&&this._editor.getOption(88)){for(var t=Object.create(null),i=0,o=r.CompletionProviderRegistry.all(this._editor.getModel());i<o.length;i++)for(var n=o[i],a=0,h=n.triggerCharacters||[];a<h.length;a++){var l=h[a],c=t[l];c||(c=t[l]=new Set).add((0,d.getSnippetSuggestSupport)()),c.add(n)}this._triggerCharacterListener=this._editor.onDidType(function(i){var o=i.charAt(i.length-1),s=t[o];if(s){var n=e._completionModel?e._completionModel.adopt(s):void 0;e.trigger({auto:!0,shy:!1,triggerCharacter:o},Boolean(e._completionModel),s,n)}})}},Object.defineProperty(u.prototype,\"state\",{get:function(){return this._state},enumerable:!0,configurable:!0}),u.prototype.cancel=function(e){void 0===e&&(e=!1),0!==this._state&&(this._triggerQuickSuggest.cancel(),this._requestToken&&(this._requestToken.cancel(),this._requestToken=void 0),this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))},u.prototype.clear=function(){this._completionDisposables.clear()},u.prototype._updateActiveSuggestSession=function(){0!==this._state&&(this._editor.hasModel()&&r.CompletionProviderRegistry.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())},u.prototype._onCursorChange=function(e){var t=this;if(this._editor.hasModel()){var i=this._editor.getModel(),o=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason||\"keyboard\"!==e.source&&\"deleteLeft\"!==e.source)0!==this._state&&this.cancel();else if(r.CompletionProviderRegistry.has(i)&&0===this._state){if(!1===this._editor.getOption(63))return;if(!o.containsRange(this._currentSelection)&&!o.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))return;if(this._editor.getOption(85).snippetsPreventQuickSuggestions&&h.SnippetController2.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet(function(){if(0===t._state&&g.shouldAutoTrigger(t._editor)&&t._editor.hasModel()){var e=t._editor.getModel(),i=t._editor.getPosition(),o=t._editor.getOption(63);if(!1!==o){if(!0===o);else{e.tokenizeIfCheap(i.lineNumber);var s=e.getLineTokens(i.lineNumber),n=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(!(o.other&&0===n||o.comments&&1===n||o.strings&&2===n))return}t.trigger({auto:!0,shy:!1})}}},this._quickSuggestDelay)}}},u.prototype._refilterCompletionItems=function(){var e=this;Promise.resolve().then(function(){if(0!==e._state&&e._editor.hasModel()){var t=e._editor.getModel(),i=e._editor.getPosition(),o=new g(t,i,2===e._state,!1);e._onNewContext(o)}})},u.prototype.trigger=function(t,o,n,r){var h=this;if(void 0===o&&(o=!1),this._editor.hasModel()){var _,p=this._editor.getModel(),m=t.auto,f=new g(p,this._editor.getPosition(),m,t.shy);this.cancel(o),this._state=m?2:1,this._onDidTrigger.fire({auto:m,shy:t.shy,position:this._editor.getPosition()}),this._context=f,_=t.triggerCharacter?{triggerKind:1,triggerCharacter:t.triggerCharacter}:n&&n.size>0?{triggerKind:2}:{triggerKind:0},this._requestToken=new l.CancellationTokenSource;var C=this._editor.getOption(82),v=1;switch(C){case\"top\":v=0;break;case\"bottom\":v=2}var S=u._createItemKindFilter(this._editor),w=c.WordDistance.create(this._editorWorker,this._editor),D=(0,d.provideSuggestionItems)(p,this._editor.getPosition(),new d.CompletionOptions(v,S,n),_,this._requestToken.token);Promise.all([D,w]).then(function(i){var o=i[0],n=i[1];if((0,s.dispose)(h._requestToken),0!==h._state&&h._editor.hasModel()){var l=h._editor.getModel();if((0,e.isNonEmptyArray)(r)){var c=(0,d.getSuggestionComparator)(v);o=o.concat(r).sort(c)}var u=new g(l,h._editor.getPosition(),m,t.shy);h._completionModel=new a.CompletionModel(o,h._context.column,{leadingLineContent:u.leadingLineContent,characterCountDelta:u.column-h._context.column},n,h._editor.getOption(85),h._editor.getOption(82));for(var _=0,p=o;_<p.length;_++){var f=p[_];(0,s.isDisposable)(f.container)&&h._completionDisposables.add(f.container)}h._onNewContext(u)}}).catch(i.onUnexpectedError)}},u._createItemKindFilter=function(e){var t=new Set;\"none\"===e.getOption(82)&&t.add(25);var i=e.getOption(85);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(25),t},u.prototype._onNewContext=function(e){if(this._context)if(e.lineNumber===this._context.lineNumber){if(e.leadingWord.startColumn<this._context.leadingWord.startColumn)this.cancel();else if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){var t=this._completionModel.incomplete,i=this._completionModel.adopt(t);this.trigger({auto:2===this._state,shy:!1},!0,t,i)}else{var o=this._completionModel.lineContext,s=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(g.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=o,(s=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:s})}}else this.cancel()},u}();exports.SuggestModel=u;"},"sourceMaps":null,"error":null,"hash":"5863e48c4f2314d8699a065a3545206d","cacheData":{"env":{}}}
{"id":"KXJu","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1607286873532},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1607286873524},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1607287523892},{"name":"../../../base/common/arrays.js","loc":{"line":63,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/arrays.js"},{"name":"../../../base/common/cancellation.js","loc":{"line":64,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/cancellation.js"},{"name":"../../../base/common/keyCodes.js","loc":{"line":65,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/keyCodes.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":66,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../browser/editorExtensions.js","loc":{"line":67,"column":79},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"},{"name":"../../browser/services/codeEditorService.js","loc":{"line":68,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js"},{"name":"../../common/core/characterClassifier.js","loc":{"line":69,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/characterClassifier.js"},{"name":"../../common/core/range.js","loc":{"line":70,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../common/editorContextKeys.js","loc":{"line":71,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/editorContextKeys.js"},{"name":"../../common/modes.js","loc":{"line":72,"column":98},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"../../common/services/editorWorkerService.js","loc":{"line":73,"column":37},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerService.js"},{"name":"./format.js","loc":{"line":74,"column":140},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/format.js"},{"name":"./formattingEdit.js","loc":{"line":75,"column":31},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formattingEdit.js"},{"name":"../../../nls.js","loc":{"line":76,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/nls.js"},{"name":"../../../platform/commands/common/commands.js","loc":{"line":77,"column":50},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/commands/common/commands.js"},{"name":"../../../platform/contextkey/common/contextkey.js","loc":{"line":78,"column":31},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js"},{"name":"../../../platform/instantiation/common/instantiation.js","loc":{"line":79,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js"},{"name":"../../../base/common/errors.js","loc":{"line":80,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"}],"generated":{"js":"\"use strict\";var e=require(\"../../../base/common/arrays.js\"),t=require(\"../../../base/common/cancellation.js\"),o=require(\"../../../base/common/keyCodes.js\"),r=require(\"../../../base/common/lifecycle.js\"),n=require(\"../../browser/editorExtensions.js\"),i=require(\"../../browser/services/codeEditorService.js\"),a=require(\"../../common/core/characterClassifier.js\"),s=require(\"../../common/core/range.js\"),c=require(\"../../common/editorContextKeys.js\"),u=require(\"../../common/modes.js\"),d=require(\"../../common/services/editorWorkerService.js\"),l=require(\"./format.js\"),h=require(\"./formattingEdit.js\"),p=_(require(\"../../../nls.js\")),f=require(\"../../../platform/commands/common/commands.js\"),m=require(\"../../../platform/contextkey/common/contextkey.js\"),g=require(\"../../../platform/instantiation/common/instantiation.js\"),y=require(\"../../../base/common/errors.js\");function v(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function _(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=r?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,t&&t.set(e,o),o}var b=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),C=function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},D=function(e,t){return function(o,r){t(o,r,e)}},O=function(e,t,o,r){return new(o||(o=Promise))(function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},E=function(e,t){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},x=function(){function t(e,t){var o=this;this._workerService=t,this._callOnDispose=new r.DisposableStore,this._callOnModel=new r.DisposableStore,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(function(){return o._update()})),this._callOnDispose.add(e.onDidChangeModel(function(){return o._update()})),this._callOnDispose.add(e.onDidChangeModelLanguage(function(){return o._update()})),this._callOnDispose.add(u.OnTypeFormattingEditProviderRegistry.onDidChange(this._update,this))}return t.prototype.dispose=function(){this._callOnDispose.dispose(),this._callOnModel.dispose()},t.prototype._update=function(){var e=this;if(this._callOnModel.clear(),this._editor.getOption(37)&&this._editor.hasModel()){var t=this._editor.getModel(),o=u.OnTypeFormattingEditProviderRegistry.ordered(t)[0];if(o&&o.autoFormatTriggerCharacters){for(var r=new a.CharacterSet,n=0,i=o.autoFormatTriggerCharacters;n<i.length;n++){var s=i[n];r.add(s.charCodeAt(0))}this._callOnModel.add(this._editor.onDidType(function(t){var o=t.charCodeAt(t.length-1);r.has(o)&&e._trigger(String.fromCharCode(o))}))}}},t.prototype._trigger=function(t){var o=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)){var r=this._editor.getModel(),n=this._editor.getPosition(),i=!1,a=this._editor.onDidChangeModelContent(function(e){if(e.isFlush)return i=!0,void a.dispose();for(var t=0,o=e.changes.length;t<o;t++){if(e.changes[t].range.endLineNumber<=n.lineNumber)return i=!0,void a.dispose()}});(0,l.getOnTypeFormattingEdits)(this._workerService,r,n,t,r.getFormattingOptions()).then(function(t){a.dispose(),i||(0,e.isNonEmptyArray)(t)&&(h.FormattingEdit.execute(o._editor,t),(0,l.alertFormattingEdits)(t))},function(e){throw a.dispose(),e})}},t.ID=\"editor.contrib.autoFormat\",t=C([D(1,d.IEditorWorkerService)],t)}(),w=function(){function e(e,t){var o=this;this.editor=e,this._instantiationService=t,this._callOnDispose=new r.DisposableStore,this._callOnModel=new r.DisposableStore,this._callOnDispose.add(e.onDidChangeConfiguration(function(){return o._update()})),this._callOnDispose.add(e.onDidChangeModel(function(){return o._update()})),this._callOnDispose.add(e.onDidChangeModelLanguage(function(){return o._update()})),this._callOnDispose.add(u.DocumentRangeFormattingEditProviderRegistry.onDidChange(this._update,this))}return e.prototype.dispose=function(){this._callOnDispose.dispose(),this._callOnModel.dispose()},e.prototype._update=function(){var e=this;this._callOnModel.clear(),this.editor.getOption(36)&&this.editor.hasModel()&&u.DocumentRangeFormattingEditProviderRegistry.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(function(t){return e._trigger(t)}))},e.prototype._trigger=function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(l.formatDocumentRangeWithSelectedProvider,this.editor,e,2,t.CancellationToken.None).catch(y.onUnexpectedError))},e.ID=\"editor.contrib.formatOnPaste\",e=C([D(1,g.IInstantiationService)],e)}(),S=function(e){function o(){return e.call(this,{id:\"editor.action.formatDocument\",label:p.localize(\"formatDocument.label\",\"Format Document\"),alias:\"Format Document\",precondition:m.ContextKeyExpr.and(c.EditorContextKeys.writable,c.EditorContextKeys.hasDocumentFormattingProvider),kbOpts:{kbExpr:m.ContextKeyExpr.and(c.EditorContextKeys.editorTextFocus,c.EditorContextKeys.hasDocumentFormattingProvider),primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{when:c.EditorContextKeys.hasDocumentFormattingProvider,group:\"1_modification\",order:1.3}})||this}return b(o,e),o.prototype.run=function(e,o){return O(this,void 0,void 0,function(){return E(this,function(r){switch(r.label){case 0:return o.hasModel()?[4,e.get(g.IInstantiationService).invokeFunction(l.formatDocumentWithSelectedProvider,o,1,t.CancellationToken.None)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},o}(n.EditorAction),M=function(e){function r(){return e.call(this,{id:\"editor.action.formatSelection\",label:p.localize(\"formatSelection.label\",\"Format Selection\"),alias:\"Format Selection\",precondition:m.ContextKeyExpr.and(c.EditorContextKeys.writable,c.EditorContextKeys.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:m.ContextKeyExpr.and(c.EditorContextKeys.editorTextFocus,c.EditorContextKeys.hasDocumentSelectionFormattingProvider),primary:(0,o.KeyChord)(2089,2084),weight:100},contextMenuOpts:{when:m.ContextKeyExpr.and(c.EditorContextKeys.hasDocumentSelectionFormattingProvider,c.EditorContextKeys.hasNonEmptySelection),group:\"1_modification\",order:1.31}})||this}return b(r,e),r.prototype.run=function(e,o){return O(this,void 0,void 0,function(){var r,n,i;return E(this,function(a){switch(a.label){case 0:return o.hasModel()?(r=e.get(g.IInstantiationService),n=o.getModel(),(i=o.getSelection()).isEmpty()&&(i=new s.Range(i.startLineNumber,1,i.startLineNumber,n.getLineMaxColumn(i.startLineNumber))),[4,r.invokeFunction(l.formatDocumentRangeWithSelectedProvider,o,i,1,t.CancellationToken.None)]):[2];case 1:return a.sent(),[2]}})})},r}(n.EditorAction);(0,n.registerEditorContribution)(x.ID,x),(0,n.registerEditorContribution)(w.ID,w),(0,n.registerEditorAction)(S),(0,n.registerEditorAction)(M),f.CommandsRegistry.registerCommand(\"editor.action.format\",function(e){return O(void 0,void 0,void 0,function(){var t,o;return E(this,function(r){switch(r.label){case 0:return(t=e.get(i.ICodeEditorService).getFocusedCodeEditor())&&t.hasModel()?(o=e.get(f.ICommandService),t.getSelection().isEmpty()?[4,o.executeCommand(\"editor.action.formatDocument\")]:[3,2]):[2];case 1:return r.sent(),[3,4];case 2:return[4,o.executeCommand(\"editor.action.formatSelection\")];case 3:r.sent(),r.label=4;case 4:return[2]}})})});"},"sourceMaps":null,"error":null,"hash":"89c4af461d6671a536833817e8e1b276","cacheData":{"env":{}}}